CREATE OR REPLACE PROCEDURE AUD_C_FST034_AUDIT AS cnt NUMBER; BEGIN SELECT COUNT(*) INTO cnt FROM BANTPROD.AUD_FST034_AUDIT; IF( cnt > 0 ) THEN INSERT INTO BANTPROD.AUD004 (AUDMstTim, AUDMstId, AUDMstTbl, AUDMstKey, AUDMstTrn, AUDMstUsr, AUDMstWst, AUDMstPgm, AUDMstReq, AUDMstTyp, AUDMstCon, AUDMstApp, AUDMstSrv, AUDMstSes, AUDMstGrp, AUDMstLog, AUDMstCur, AUDMstSnt,AUDMstTic) SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'FST034',CONCAT( CONCAT( CONCAT( CONCAT( '|PGCOD=', RTRIM(COALESCE(AUD_old_PGCOD,AUD_new_PGCOD)) ),CONCAT( '|TRMOD=', RTRIM(COALESCE(AUD_old_TRMOD,AUD_new_TRMOD)) ) ),CONCAT( '|TRNRO=', RTRIM(COALESCE(AUD_old_TRNRO,AUD_new_TRNRO)) ) ),'|' ),AUD_FST034_UBT,AUD_FST034_UBU,AUD_FST034_UBM,AUD_FST034_UBP,AUD_FST034_UBR,AUD_FST034_UAs,AUD_FST034_UBC,AUD_FST034_UBA,AUD_FST034_UBS, '', 'BANTOTAL', '', '', '',AUD_FST034_UT FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'PFTCOD',AUD_old_PFTCOD,AUD_new_PFTCOD FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'PFTCOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'PGCOD',AUD_old_PGCOD,AUD_new_PGCOD FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'PGCOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRALBA',AUD_old_TRALBA,AUD_new_TRALBA FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRALBA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRANHI',AUD_old_TRANHI,AUD_new_TRANHI FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRANHI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRBJAN',AUD_old_TRBJAN,AUD_new_TRBJAN FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRBJAN'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRBJPA',AUD_old_TRBJPA,AUD_new_TRBJPA FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRBJPA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRCBCU',AUD_old_TRCBCU,AUD_new_TRCBCU FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRCBCU'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRCCLA',AUD_old_TRCCLA,AUD_new_TRCCLA FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRCCLA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRCCOS',AUD_old_TRCCOS,AUD_new_TRCCOS FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRCCOS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRCEJ',AUD_old_TRCEJ,AUD_new_TRCEJ FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRCEJ'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRCOMI',AUD_old_TRCOMI,AUD_new_TRCOMI FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn
AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRCOMI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRCONF',AUD_old_TRCONF,AUD_new_TRCONF FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRCONF'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRCORS',AUD_old_TRCORS,AUD_new_TRCORS FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRCORS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRDTPO',AUD_old_TRDTPO,AUD_new_TRDTPO FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRDTPO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRGTS',AUD_old_TRGTS,AUD_new_TRGTS FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRGTS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRHABT',AUD_old_TRHABT,AUD_new_TRHABT FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRHABT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRIDOC',AUD_old_TRIDOC,AUD_new_TRIDOC FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRIDOC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRIMPR',AUD_old_TRIMPR,AUD_new_TRIMPR FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRIMPR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRINCR',AUD_old_TRINCR,AUD_new_TRINCR FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRINCR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRIVA',AUD_old_TRIVA,AUD_new_TRIVA FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRIVA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRIVME',AUD_old_TRIVME,AUD_new_TRIVME FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRIVME'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRME',AUD_old_TRME,AUD_new_TRME FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRME'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRMN',AUD_old_TRMN,AUD_new_TRMN FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRMN'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRMOD',AUD_old_TRMOD,AUD_new_TRMOD FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRMOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRNETP',AUD_old_TRNETP,AUD_new_TRNETP FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRNETP'); INSERT INTO BANTPROD.AUD005 SELEC
T AUD_FST034_UOn,AUD_FST034_GuidKey,'TRNOM',AUD_old_TRNOM,AUD_new_TRNOM FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRNOM'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRNRO',AUD_old_TRNRO,AUD_new_TRNRO FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRNRO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TROMLM',AUD_old_TROMLM,AUD_new_TROMLM FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TROMLM'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TROPAU',AUD_old_TROPAU,AUD_new_TROPAU FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TROPAU'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TROPEP',AUD_old_TROPEP,AUD_new_TROPEP FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TROPEP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRPORC',AUD_old_TRPORC,AUD_new_TRPORC FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRPORC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRRECO',AUD_old_TRRECO,AUD_new_TRRECO FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRRECO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRSORC',AUD_old_TRSORC,AUD_new_TRSORC FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRSORC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRSWIF',AUD_old_TRSWIF,AUD_new_TRSWIF FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRSWIF'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRTAFE',AUD_old_TRTAFE,AUD_new_TRTAFE FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRTAFE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRTDEF',AUD_old_TRTDEF,AUD_new_TRTDEF FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRTDEF'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST034_UOn,AUD_FST034_GuidKey,'TRTEXT',AUD_old_TRTEXT,AUD_new_TRTEXT FROM BANTPROD.AUD_FST034_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey AND AUDMstFld = 'TRTEXT'); DELETE FROM AUD_FST034_AUDIT  WHERE  EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FST034_UOn AND AUDMstId = AUD_FST034_GuidKey);  COMMIT ;END IF;END;
/

