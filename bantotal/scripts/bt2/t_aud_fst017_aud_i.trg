CREATE OR REPLACE TRIGGER T_AUD_FST017_AUD_I  AFTER INSERT ON FST017  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_FST017_AUDIT ( AUD_new_PGADFI,AUD_new_PGAJMN,AUD_new_PGALTP,AUD_new_PGAPOD,AUD_new_PGBBTT,AUD_new_PGCAXO,AUD_new_PGCAXS,AUD_new_PGCCXO,AUD_new_PGCCXS,AUD_new_PGCEFL,AUD_new_PGCLTE,AUD_new_PGCOD,AUD_new_PGCSN1,AUD_new_PGCSN2,AUD_new_PGCSN3,AUD_new_PGCSN4,AUD_new_PGCSN5,AUD_new_PGDUSA,AUD_new_PGDUSB,AUD_new_PGFAPE,AUD_new_PGFBCE,AUD_new_PGFCIE,AUD_new_PGFMES,AUD_new_PGHIOL,AUD_new_PGIDIO,AUD_new_PGIVM2,AUD_new_PGIVME,AUD_new_PGLIMM,AUD_new_PGMDBC,AUD_new_PGMNAC,AUD_new_PGMOCA,AUD_new_PGMOCC,AUD_new_PGMODC,AUD_new_PGNBCO,AUD_new_PGNIV,AUD_new_PGNOM,AUD_new_PGPAIS,AUD_new_PGPLAT,AUD_new_PGPOME,AUD_new_PGPOMN,AUD_new_PGREFV,AUD_new_PGRUBR,AUD_new_PGSIGL,AUD_new_PGSUC,AUD_new_PGSUC0,AUD_new_PGVUTI,AUD_new_PGVUTM,AUD_new_PGVUTV,AUD_new_RPCCYG, AUD_FST017_GuidKey ,AUD_FST017_UOn,AUD_FST017_UT ,AUD_FST017_UBR ,AUD_FST017_UBC ,AUD_FST017_UBT ,AUD_FST017_UBU ,AUD_FST017_UBA ,AUD_FST017_UBS ,AUD_FST017_UBP ,AUD_FST017_UBM ,AUD_FST017_UAs  )      VALUES (:new.PGADFI,:new.PGAJMN,:new.PGALTP,:new.PGAPOD,:new.PGBBTT,:new.PGCAXO,:new.PGCAXS,:new.PGCCXO,:new.PGCCXS,:new.PGCEFL,:new.PGCLTE,:new.PGCOD,:new.PGCSN1,:new.PGCSN2,:new.PGCSN3,:new.PGCSN4,:new.PGCSN5,:new.PGDUSA,:new.PGDUSB,:new.PGFAPE,:new.PGFBCE,:new.PGFCIE,:new.PGFMES,:new.PGHIOL,:new.PGIDIO,:new.PGIVM2,:new.PGIVME,:new.PGLIMM,:new.PGMDBC,:new.PGMNAC,:new.PGMOCA,:new.PGMOCC,:new.PGMODC,:new.PGNBCO,:new.PGNIV,:new.PGNOM,:new.PGPAIS,:new.PGPLAT,:new.PGPOME,:new.PGPOMN,:new.PGREFV,:new.PGRUBR,:new.PGSIGL,:new.PGSUC,:new.PGSUC0,:new.PGVUTI,:new.PGVUTM,:new.PGVUTV,:new.RPCCYG, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'I'); END T_AUD_FST017_AUD_I;
/

