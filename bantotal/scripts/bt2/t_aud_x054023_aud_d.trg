CREATE OR REPLACE TRIGGER T_AUD_X054023_AUD_D  AFTER DELETE ON X054023  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_X054023_AUDIT (AUD_old_XLLAOCTA,AUD_old_XLLAOMDA,AUD_old_XLLAOMOD,AUD_old_XLLAOOPER,AUD_old_XLLAOPAP,AUD_old_XLLAOSBOP,AUD_old_XLLAOSUC,AUD_old_XLLAOTOP,AUD_old_XLLAUX1,AUD_old_XLLAUX2,AUD_old_XLLAUX3,AUD_old_XLLAUX4,AUD_old_XLLAUX5,AUD_old_XLLAUX6,AUD_old_XLLCANTCUO,AUD_old_XLLCAPFIN,AUD_old_XLLCAPITAL,AUD_old_XLLCAPLIQ,AUD_old_XLLCIUD,AUD_old_XLLCNTCUOI,AUD_old_XLLFINANC,AUD_old_XLLFPRIMPA,AUD_old_XLLFPRIPAG,AUD_old_XLLFVALOR,AUD_old_XLLFVTO,AUD_old_XLLGRACFIJ,AUD_old_XLLGRADIMP,AUD_old_XLLGRADPER,AUD_old_XLLGRADPOR,AUD_old_XLLIMPU,AUD_old_XLLMEDICO,AUD_old_XLLMODOCAL,AUD_old_XLLPCLDREV,AUD_old_XLLPCLPLUS,AUD_old_XLLPCLTCOD,AUD_old_XLLPERIODO,AUD_old_XLLPGCOD,AUD_old_XLLPLAZO,AUD_old_XLLPRECIO,AUD_old_XLLREDON,AUD_old_XLLTASAEJ,AUD_old_XLLTASAP,AUD_old_XLLTFERP,AUD_old_XLLTIPDIAP,AUD_old_XLLTIPOANO,AUD_old_XLLTIPODIA,AUD_old_XLLTIPOPRE,AUD_old_XLLTIPOTAS,AUD_old_XLLVALCAN,AUD_old_XLLVALCUO, AUD_X054023_GuidKey ,AUD_X054023_UOn,AUD_X054023_UT ,AUD_X054023_UBR ,AUD_X054023_UBC ,AUD_X054023_UBT ,AUD_X054023_UBU ,AUD_X054023_UBA ,AUD_X054023_UBS ,AUD_X054023_UBP ,AUD_X054023_UBM ,AUD_X054023_UAs )      VALUES (:old.XLLAOCTA,:old.XLLAOMDA,:old.XLLAOMOD,:old.XLLAOOPER,:old.XLLAOPAP,:old.XLLAOSBOP,:old.XLLAOSUC,:old.XLLAOTOP,:old.XLLAUX1,:old.XLLAUX2,:old.XLLAUX3,:old.XLLAUX4,:old.XLLAUX5,:old.XLLAUX6,:old.XLLCANTCUO,:old.XLLCAPFIN,:old.XLLCAPITAL,:old.XLLCAPLIQ,:old.XLLCIUD,:old.XLLCNTCUOI,:old.XLLFINANC,:old.XLLFPRIMPA,:old.XLLFPRIPAG,:old.XLLFVALOR,:old.XLLFVTO,:old.XLLGRACFIJ,:old.XLLGRADIMP,:old.XLLGRADPER,:old.XLLGRADPOR,:old.XLLIMPU,:old.XLLMEDICO,:old.XLLMODOCAL,:old.XLLPCLDREV,:old.XLLPCLPLUS,:old.XLLPCLTCOD,:old.XLLPERIODO,:old.XLLPGCOD,:old.XLLPLAZO,:old.XLLPRECIO,:old.XLLREDON,:old.XLLTASAEJ,:old.XLLTASAP,:old.XLLTFERP,:old.XLLTIPDIAP,:old.XLLTIPOANO,:old.XLLTIPODIA,:old.XLLTIPOPRE,:old.XLLTIPOTAS,:old.XLLVALCAN,:old.XLLVALCUO, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'D' ); END T_AUD_X054023_AUD_D;
/

