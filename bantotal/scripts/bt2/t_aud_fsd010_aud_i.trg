CREATE OR REPLACE TRIGGER T_AUD_FSD010_AUD_I  AFTER INSERT ON FSD010  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_FSD010_AUDIT ( AUD_new_AOAFIV,AUD_new_AOARB,AUD_new_AOARB1,AUD_new_AOAVIS,AUD_new_AOCBCU,AUD_new_AOCLTCOD,AUD_new_AOCTA,AUD_new_AODREV,AUD_new_AOEVEN,AUD_new_AOFE99,AUD_new_AOFNUM,AUD_new_AOFVAL,AUD_new_AOFVTO,AUD_new_AOIMP,AUD_new_AOMD,AUD_new_AOMD1,AUD_new_AOMDA,AUD_new_AOMOD,AUD_new_AONUME,AUD_new_AOOPER,AUD_new_AOPAP,AUD_new_AOPERIOD,AUD_new_AOPLUS,AUD_new_AOPRE,AUD_new_AOPRE1,AUD_new_AOPZO,AUD_new_AOSBOP,AUD_new_AOSTAT,AUD_new_AOSUC,AUD_new_AOTANO,AUD_new_AOTASA,AUD_new_AOTASC,AUD_new_AOTCBI,AUD_new_AOTCBI1,AUD_new_AOTDIA,AUD_new_AOTINT,AUD_new_AOTMOR,AUD_new_AOTOPE,AUD_new_AOTTAC,AUD_new_AOTTAS,AUD_new_AOTVTO,AUD_new_PGCOD, AUD_FSD010_GuidKey ,AUD_FSD010_UOn,AUD_FSD010_UT ,AUD_FSD010_UBR ,AUD_FSD010_UBC ,AUD_FSD010_UBT ,AUD_FSD010_UBU ,AUD_FSD010_UBA ,AUD_FSD010_UBS ,AUD_FSD010_UBP ,AUD_FSD010_UBM ,AUD_FSD010_UAs  )      VALUES (:new.AOAFIV,:new.AOARB,:new.AOARB1,:new.AOAVIS,:new.AOCBCU,:new.AOCLTCOD,:new.AOCTA,:new.AODREV,:new.AOEVEN,:new.AOFE99,:new.AOFNUM,:new.AOFVAL,:new.AOFVTO,:new.AOIMP,:new.AOMD,:new.AOMD1,:new.AOMDA,:new.AOMOD,:new.AONUME,:new.AOOPER,:new.AOPAP,:new.AOPERIOD,:new.AOPLUS,:new.AOPRE,:new.AOPRE1,:new.AOPZO,:new.AOSBOP,:new.AOSTAT,:new.AOSUC,:new.AOTANO,:new.AOTASA,:new.AOTASC,:new.AOTCBI,:new.AOTCBI1,:new.AOTDIA,:new.AOTINT,:new.AOTMOR,:new.AOTOPE,:new.AOTTAC,:new.AOTTAS,:new.AOTVTO,:new.PGCOD, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'I'); END T_AUD_FSD010_AUD_I;
/

