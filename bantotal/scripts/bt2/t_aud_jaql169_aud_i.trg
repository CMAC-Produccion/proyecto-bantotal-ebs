CREATE OR REPLACE TRIGGER T_AUD_JAQL169_AUD_I  AFTER INSERT ON JAQL169  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_JAQL169_AUDIT ( AUD_new_JAQL169ALC,AUD_new_JAQL169CCO,AUD_new_JAQL169CNT,AUD_new_JAQL169COL,AUD_new_JAQL169CTA,AUD_new_JAQL169DES,AUD_new_JAQL169EMB,AUD_new_JAQL169EMP,AUD_new_JAQL169EST,AUD_new_JAQL169FEC,AUD_new_JAQL169FIN,AUD_new_JAQL169FPO,AUD_new_JAQL169FUP,AUD_new_JAQL169GRA,AUD_new_JAQL169HOR,AUD_new_JAQL169IMP,AUD_new_JAQL169INI,AUD_new_JAQL169INS,AUD_new_JAQL169ITM,AUD_new_JAQL169ITR,AUD_new_JAQL169ITS,AUD_new_JAQL169ITT,AUD_new_JAQL169MAD,AUD_new_JAQL169MDA,AUD_new_JAQL169MOA,AUD_new_JAQL169MOD,AUD_new_JAQL169MOT,AUD_new_JAQL169MTO,AUD_new_JAQL169NPR,AUD_new_JAQL169OPE,AUD_new_JAQL169ORI,AUD_new_JAQL169PAP,AUD_new_JAQL169POS,AUD_new_JAQL169PRA,AUD_new_JAQL169PRO,AUD_new_JAQL169PRP,AUD_new_JAQL169RUB,AUD_new_JAQL169SOP,AUD_new_JAQL169SUC,AUD_new_JAQL169TIP,AUD_new_JAQL169TOA,AUD_new_JAQL169TOP,AUD_new_JAQL169USR,AUD_new_JAQL169VAL,AUD_new_JAQL170SBS, AUD_JAQL169_GuidKey ,AUD_JAQL169_UOn,AUD_JAQL169_UT ,AUD_JAQL169_UBR ,AUD_JAQL169_UBC ,AUD_JAQL169_UBT ,AUD_JAQL169_UBU ,AUD_JAQL169_UBA ,AUD_JAQL169_UBS ,AUD_JAQL169_UBP ,AUD_JAQL169_UBM ,AUD_JAQL169_UAs  )      VALUES (:new.JAQL169ALC,:new.JAQL169CCO,:new.JAQL169CNT,:new.JAQL169COL,:new.JAQL169CTA,:new.JAQL169DES,:new.JAQL169EMB,:new.JAQL169EMP,:new.JAQL169EST,:new.JAQL169FEC,:new.JAQL169FIN,:new.JAQL169FPO,:new.JAQL169FUP,:new.JAQL169GRA,:new.JAQL169HOR,:new.JAQL169IMP,:new.JAQL169INI,:new.JAQL169INS,:new.JAQL169ITM,:new.JAQL169ITR,:new.JAQL169ITS,:new.JAQL169ITT,:new.JAQL169MAD,:new.JAQL169MDA,:new.JAQL169MOA,:new.JAQL169MOD,:new.JAQL169MOT,:new.JAQL169MTO,:new.JAQL169NPR,:new.JAQL169OPE,:new.JAQL169ORI,:new.JAQL169PAP,:new.JAQL169POS,:new.JAQL169PRA,:new.JAQL169PRO,:new.JAQL169PRP,:new.JAQL169RUB,:new.JAQL169SOP,:new.JAQL169SUC,:new.JAQL169TIP,:new.JAQL169TOA,:new.JAQL169TOP,:new.JAQL169USR,:new.JAQL169VAL,:new.JAQL170SBS, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'I'); END T_AUD_JAQL169_AUD_I;
/

