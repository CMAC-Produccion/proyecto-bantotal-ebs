CREATE OR REPLACE PROCEDURE AUD_C_JAQZ695_AUDIT AS cnt NUMBER; BEGIN SELECT COUNT(*) INTO cnt FROM BANTPROD.AUD_JAQZ695_AUDIT; IF( cnt > 0 ) THEN INSERT INTO BANTPROD.AUD004 (AUDMstTim, AUDMstId, AUDMstTbl, AUDMstKey, AUDMstTrn, AUDMstUsr, AUDMstWst, AUDMstPgm, AUDMstReq, AUDMstTyp, AUDMstCon, AUDMstApp, AUDMstSrv, AUDMstSes, AUDMstGrp, AUDMstLog, AUDMstCur, AUDMstSnt,AUDMstTic) SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695',CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( '|JAQZ695COR=', RTRIM(COALESCE(AUD_old_JAQZ695COR,AUD_new_JAQZ695COR)) ),CONCAT( '|JAQZ695FEP=', RTRIM(COALESCE(AUD_old_JAQZ695FEP,AUD_new_JAQZ695FEP)) ) ),CONCAT( '|JAQZ695NDO=', RTRIM(COALESCE(AUD_old_JAQZ695NDO,AUD_new_JAQZ695NDO)) ) ),CONCAT( '|JAQZ695PAI=', RTRIM(COALESCE(AUD_old_JAQZ695PAI,AUD_new_JAQZ695PAI)) ) ),CONCAT( '|JAQZ695TDO=', RTRIM(COALESCE(AUD_old_JAQZ695TDO,AUD_new_JAQZ695TDO)) ) ),'|' ),AUD_JAQZ695_UBT,AUD_JAQZ695_UBU,AUD_JAQZ695_UBM,AUD_JAQZ695_UBP,AUD_JAQZ695_UBR,AUD_JAQZ695_UAs,AUD_JAQZ695_UBC,AUD_JAQZ695_UBA,AUD_JAQZ695_UBS, '', 'BANTOTAL', '', '', '',AUD_JAQZ695_UT FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695ASE',AUD_old_JAQZ695ASE,AUD_new_JAQZ695ASE FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695ASE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695AU1',TO_CHAR(AUD_old_JAQZ695AU1,'YYYY-MM-DD'),TO_CHAR(AUD_new_JAQZ695AU1,'YYYY-MM-DD') FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695AU1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695AU2',AUD_old_JAQZ695AU2,AUD_new_JAQZ695AU2 FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695AU2'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695AU3',AUD_old_JAQZ695AU3,AUD_new_JAQZ695AU3 FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695AU3'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695AU4',AUD_old_JAQZ695AU4,AUD_new_JAQZ695AU4 FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695AU4'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695AU5',AUD_old_JAQZ695AU5,AUD_new_JAQZ695AU5 FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695AU5'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695CHK',AUD_old_JAQZ695CHK,AUD_new_JAQZ695CHK FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695CHK'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695COR',AUD_old_JAQZ695COR,AUD_new_JAQZ695COR FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695COR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695CTA',AUD_old_JAQZ695CTA,AUD_new_JAQZ695CTA FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695CTA'); INSERT INTO BAN
TPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695CUO',AUD_old_JAQZ695CUO,AUD_new_JAQZ695CUO FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695CUO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695EVA',AUD_old_JAQZ695EVA,AUD_new_JAQZ695EVA FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695EVA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695FEP',TO_CHAR(AUD_old_JAQZ695FEP,'YYYY-MM-DD'),TO_CHAR(AUD_new_JAQZ695FEP,'YYYY-MM-DD') FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695FEP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695FLG',AUD_old_JAQZ695FLG,AUD_new_JAQZ695FLG FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695FLG'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695IND',AUD_old_JAQZ695IND,AUD_new_JAQZ695IND FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695IND'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695MCU',AUD_old_JAQZ695MCU,AUD_new_JAQZ695MCU FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695MCU'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695MDA',AUD_old_JAQZ695MDA,AUD_new_JAQZ695MDA FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695MDA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695MOD',AUD_old_JAQZ695MOD,AUD_new_JAQZ695MOD FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695MOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695MOE',AUD_old_JAQZ695MOE,AUD_new_JAQZ695MOE FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695MOE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695MTO',AUD_old_JAQZ695MTO,AUD_new_JAQZ695MTO FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695MTO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695NDO',AUD_old_JAQZ695NDO,AUD_new_JAQZ695NDO FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695NDO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695PAI',AUD_old_JAQZ695PAI,AUD_new_JAQZ695PAI FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695PAI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695PZO',AUD_old_JAQZ695PZO,AUD_new_JAQZ695PZO FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695PZO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ69
5_UOn,AUD_JAQZ695_GuidKey,'JAQZ695SBS',AUD_old_JAQZ695SBS,AUD_new_JAQZ695SBS FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695SBS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695SUC',AUD_old_JAQZ695SUC,AUD_new_JAQZ695SUC FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695SUC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695TDO',AUD_old_JAQZ695TDO,AUD_new_JAQZ695TDO FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695TDO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695TOP',AUD_old_JAQZ695TOP,AUD_new_JAQZ695TOP FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695TOP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQZ695_UOn,AUD_JAQZ695_GuidKey,'JAQZ695USR',AUD_old_JAQZ695USR,AUD_new_JAQZ695USR FROM BANTPROD.AUD_JAQZ695_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey AND AUDMstFld = 'JAQZ695USR'); DELETE FROM AUD_JAQZ695_AUDIT  WHERE  EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_JAQZ695_UOn AND AUDMstId = AUD_JAQZ695_GuidKey);  COMMIT ;END IF;END;
/

