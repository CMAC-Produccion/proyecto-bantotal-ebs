CREATE OR REPLACE PROCEDURE AUD_C_FPP102_AUDIT AS cnt NUMBER; BEGIN SELECT COUNT(*) INTO cnt FROM BANTPROD.AUD_FPP102_AUDIT; IF( cnt > 0 ) THEN INSERT INTO BANTPROD.AUD004 (AUDMstTim, AUDMstId, AUDMstTbl, AUDMstKey, AUDMstTrn, AUDMstUsr, AUDMstWst, AUDMstPgm, AUDMstReq, AUDMstTyp, AUDMstCon, AUDMstApp, AUDMstSrv, AUDMstSes, AUDMstGrp, AUDMstLog, AUDMstCur, AUDMstSnt,AUDMstTic) SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'FPP102',CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( '|PP102COD=', RTRIM(COALESCE(AUD_old_PP102COD,AUD_new_PP102COD)) ),CONCAT( '|PP102CTA=', RTRIM(COALESCE(AUD_old_PP102CTA,AUD_new_PP102CTA)) ) ),CONCAT( '|PP102MDA=', RTRIM(COALESCE(AUD_old_PP102MDA,AUD_new_PP102MDA)) ) ),CONCAT( '|PP102MOD=', RTRIM(COALESCE(AUD_old_PP102MOD,AUD_new_PP102MOD)) ) ),CONCAT( '|PP102NCART=', RTRIM(COALESCE(AUD_old_PP102NCART,AUD_new_PP102NCART)) ) ),CONCAT( '|PP102OPE=', RTRIM(COALESCE(AUD_old_PP102OPE,AUD_new_PP102OPE)) ) ),CONCAT( '|PP102PAP=', RTRIM(COALESCE(AUD_old_PP102PAP,AUD_new_PP102PAP)) ) ),CONCAT( '|PP102SBO=', RTRIM(COALESCE(AUD_old_PP102SBO,AUD_new_PP102SBO)) ) ),CONCAT( '|PP102SUC=', RTRIM(COALESCE(AUD_old_PP102SUC,AUD_new_PP102SUC)) ) ),CONCAT( '|PP102TOP=', RTRIM(COALESCE(AUD_old_PP102TOP,AUD_new_PP102TOP)) ) ),'|' ),AUD_FPP102_UBT,AUD_FPP102_UBU,AUD_FPP102_UBM,AUD_FPP102_UBP,AUD_FPP102_UBR,AUD_FPP102_UAs,AUD_FPP102_UBC,AUD_FPP102_UBA,AUD_FPP102_UBS, '', 'BANTOTAL', '', '', '',AUD_FPP102_UT FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX1',AUD_old_PP102AUX1,AUD_new_PP102AUX1 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX10',AUD_old_PP102AUX10,AUD_new_PP102AUX10 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX10'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX11',AUD_old_PP102AUX11,AUD_new_PP102AUX11 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX11'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX12',TO_CHAR(AUD_old_PP102AUX12,'YYYY-MM-DD HH24:MI:SS.FF'),TO_CHAR(AUD_new_PP102AUX12,'YYYY-MM-DD HH24:MI:SS.FF') FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX12'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX13',TO_CHAR(AUD_old_PP102AUX13,'YYYY-MM-DD HH24:MI:SS.FF'),TO_CHAR(AUD_new_PP102AUX13,'YYYY-MM-DD HH24:MI:SS.FF') FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX13'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX14',TO_CHAR(AUD_old_PP102AUX14,'YYYY-MM-DD HH24:MI:SS.FF'),TO_CHAR(AUD_new_PP102AUX14,'YYYY-MM-DD HH24:MI:SS.FF') FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX14'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX15',AUD_old_PP102AUX15,AUD_new_PP102AUX15 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX15'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX16',AUD_old_PP102AUX16,AU
D_new_PP102AUX16 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX16'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX2',AUD_old_PP102AUX2,AUD_new_PP102AUX2 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX2'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX3',AUD_old_PP102AUX3,AUD_new_PP102AUX3 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX3'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX4',AUD_old_PP102AUX4,AUD_new_PP102AUX4 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX4'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX5',AUD_old_PP102AUX5,AUD_new_PP102AUX5 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX5'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX6',AUD_old_PP102AUX6,AUD_new_PP102AUX6 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX6'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX7',AUD_old_PP102AUX7,AUD_new_PP102AUX7 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX7'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX8',AUD_old_PP102AUX8,AUD_new_PP102AUX8 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX8'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102AUX9',AUD_old_PP102AUX9,AUD_new_PP102AUX9 FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102AUX9'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102COD',AUD_old_PP102COD,AUD_new_PP102COD FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102COD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102CTA',AUD_old_PP102CTA,AUD_new_PP102CTA FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102CTA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102HAB',AUD_old_PP102HAB,AUD_new_PP102HAB FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102HAB'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102MDA',AUD_old_PP102MDA,AUD_new_PP102MDA FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102MDA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102MOD',AUD_old_PP102MOD,AUD_new_PP102MOD FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102MOD'); INSERT INTO BANTP
ROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102NCART',AUD_old_PP102NCART,AUD_new_PP102NCART FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102NCART'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102OPE',AUD_old_PP102OPE,AUD_new_PP102OPE FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102OPE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102PAP',AUD_old_PP102PAP,AUD_new_PP102PAP FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102PAP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102SBO',AUD_old_PP102SBO,AUD_new_PP102SBO FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102SBO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102SUC',AUD_old_PP102SUC,AUD_new_PP102SUC FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102SUC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TCD',AUD_old_PP102TCD,AUD_new_PP102TCD FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TCD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TCO',AUD_old_PP102TCO,AUD_new_PP102TCO FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TCO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TFC',TO_CHAR(AUD_old_PP102TFC,'YYYY-MM-DD HH24:MI:SS.FF'),TO_CHAR(AUD_new_PP102TFC,'YYYY-MM-DD HH24:MI:SS.FF') FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TFC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TMO',AUD_old_PP102TMO,AUD_new_PP102TMO FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TMO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TNR',AUD_old_PP102TNR,AUD_new_PP102TNR FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TNR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TOP',AUD_old_PP102TOP,AUD_new_PP102TOP FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TOP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TOR',AUD_old_PP102TOR,AUD_new_PP102TOR FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TOR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TSB',AUD_old_PP102TSB,AUD_new_PP102TSB FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TSB'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TSU',AUD_old_PP102TSU,AUD_new_PP102TSU FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BAN
TPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TSU'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP102_UOn,AUD_FPP102_GuidKey,'PP102TTR',AUD_old_PP102TTR,AUD_new_PP102TTR FROM BANTPROD.AUD_FPP102_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey AND AUDMstFld = 'PP102TTR'); DELETE FROM AUD_FPP102_AUDIT  WHERE  EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FPP102_UOn AND AUDMstId = AUD_FPP102_GuidKey);  COMMIT ;END IF;END;
/

