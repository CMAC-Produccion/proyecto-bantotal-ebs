CREATE OR REPLACE TRIGGER T_AUD_X054023_AUD_I  AFTER INSERT ON X054023  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_X054023_AUDIT ( AUD_new_XLLAOCTA,AUD_new_XLLAOMDA,AUD_new_XLLAOMOD,AUD_new_XLLAOOPER,AUD_new_XLLAOPAP,AUD_new_XLLAOSBOP,AUD_new_XLLAOSUC,AUD_new_XLLAOTOP,AUD_new_XLLAUX1,AUD_new_XLLAUX2,AUD_new_XLLAUX3,AUD_new_XLLAUX4,AUD_new_XLLAUX5,AUD_new_XLLAUX6,AUD_new_XLLCANTCUO,AUD_new_XLLCAPFIN,AUD_new_XLLCAPITAL,AUD_new_XLLCAPLIQ,AUD_new_XLLCIUD,AUD_new_XLLCNTCUOI,AUD_new_XLLFINANC,AUD_new_XLLFPRIMPA,AUD_new_XLLFPRIPAG,AUD_new_XLLFVALOR,AUD_new_XLLFVTO,AUD_new_XLLGRACFIJ,AUD_new_XLLGRADIMP,AUD_new_XLLGRADPER,AUD_new_XLLGRADPOR,AUD_new_XLLIMPU,AUD_new_XLLMEDICO,AUD_new_XLLMODOCAL,AUD_new_XLLPCLDREV,AUD_new_XLLPCLPLUS,AUD_new_XLLPCLTCOD,AUD_new_XLLPERIODO,AUD_new_XLLPGCOD,AUD_new_XLLPLAZO,AUD_new_XLLPRECIO,AUD_new_XLLREDON,AUD_new_XLLTASAEJ,AUD_new_XLLTASAP,AUD_new_XLLTFERP,AUD_new_XLLTIPDIAP,AUD_new_XLLTIPOANO,AUD_new_XLLTIPODIA,AUD_new_XLLTIPOPRE,AUD_new_XLLTIPOTAS,AUD_new_XLLVALCAN,AUD_new_XLLVALCUO, AUD_X054023_GuidKey ,AUD_X054023_UOn,AUD_X054023_UT ,AUD_X054023_UBR ,AUD_X054023_UBC ,AUD_X054023_UBT ,AUD_X054023_UBU ,AUD_X054023_UBA ,AUD_X054023_UBS ,AUD_X054023_UBP ,AUD_X054023_UBM ,AUD_X054023_UAs  )      VALUES (:new.XLLAOCTA,:new.XLLAOMDA,:new.XLLAOMOD,:new.XLLAOOPER,:new.XLLAOPAP,:new.XLLAOSBOP,:new.XLLAOSUC,:new.XLLAOTOP,:new.XLLAUX1,:new.XLLAUX2,:new.XLLAUX3,:new.XLLAUX4,:new.XLLAUX5,:new.XLLAUX6,:new.XLLCANTCUO,:new.XLLCAPFIN,:new.XLLCAPITAL,:new.XLLCAPLIQ,:new.XLLCIUD,:new.XLLCNTCUOI,:new.XLLFINANC,:new.XLLFPRIMPA,:new.XLLFPRIPAG,:new.XLLFVALOR,:new.XLLFVTO,:new.XLLGRACFIJ,:new.XLLGRADIMP,:new.XLLGRADPER,:new.XLLGRADPOR,:new.XLLIMPU,:new.XLLMEDICO,:new.XLLMODOCAL,:new.XLLPCLDREV,:new.XLLPCLPLUS,:new.XLLPCLTCOD,:new.XLLPERIODO,:new.XLLPGCOD,:new.XLLPLAZO,:new.XLLPRECIO,:new.XLLREDON,:new.XLLTASAEJ,:new.XLLTASAP,:new.XLLTFERP,:new.XLLTIPDIAP,:new.XLLTIPOANO,:new.XLLTIPODIA,:new.XLLTIPOPRE,:new.XLLTIPOTAS,:new.XLLVALCAN,:new.XLLVALCUO, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'I'); END T_AUD_X054023_AUD_I;
/

