CREATE OR REPLACE TRIGGER T_AUD_FSE115_AUD_I  AFTER INSERT ON FSE115  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_FSE115_AUDIT ( AUD_new_SE115AX1,AUD_new_SE115AX2,AUD_new_SE115AX3,AUD_new_SE115AX4,AUD_new_SE115BCODS,AUD_new_SE115BCOOR,AUD_new_SE115BSUDS,AUD_new_SE115BSUOR,AUD_new_SE115CCIDS,AUD_new_SE115CCIOR,AUD_new_SE115CD,AUD_new_SE115CLASI,AUD_new_SE115CO,AUD_new_SE115COD,AUD_new_SE115CODT,AUD_new_SE115CRIT,AUD_new_SE115CTA,AUD_new_SE115DIRBE,AUD_new_SE115DIROR,AUD_new_SE115F1,AUD_new_SE115FC,AUD_new_SE115FVAL,AUD_new_SE115FVTO,AUD_new_SE115IMP,AUD_new_SE115IMPCO,AUD_new_SE115MD,AUD_new_SE115MDA,AUD_new_SE115MDACO,AUD_new_SE115MOD,AUD_new_SE115NDBEN,AUD_new_SE115NDORI,AUD_new_SE115NOMBE,AUD_new_SE115NOMOR,AUD_new_SE115OPER,AUD_new_SE115OR,AUD_new_SE115PABEN,AUD_new_SE115PAORI,AUD_new_SE115PAP,AUD_new_SE115RE,AUD_new_SE115REF,AUD_new_SE115SBOP,AUD_new_SE115SBOR,AUD_new_SE115SU,AUD_new_SE115SUC,AUD_new_SE115TC,AUD_new_SE115TDBEN,AUD_new_SE115TDORI,AUD_new_SE115TELBE,AUD_new_SE115TIPO,AUD_new_SE115TOPE,AUD_new_SE115TR, AUD_FSE115_GuidKey ,AUD_FSE115_UOn,AUD_FSE115_UT ,AUD_FSE115_UBR ,AUD_FSE115_UBC ,AUD_FSE115_UBT ,AUD_FSE115_UBU ,AUD_FSE115_UBA ,AUD_FSE115_UBS ,AUD_FSE115_UBP ,AUD_FSE115_UBM ,AUD_FSE115_UAs  )      VALUES (:new.SE115AX1,:new.SE115AX2,:new.SE115AX3,:new.SE115AX4,:new.SE115BCODS,:new.SE115BCOOR,:new.SE115BSUDS,:new.SE115BSUOR,:new.SE115CCIDS,:new.SE115CCIOR,:new.SE115CD,:new.SE115CLASI,:new.SE115CO,:new.SE115COD,:new.SE115CODT,:new.SE115CRIT,:new.SE115CTA,:new.SE115DIRBE,:new.SE115DIROR,:new.SE115F1,:new.SE115FC,:new.SE115FVAL,:new.SE115FVTO,:new.SE115IMP,:new.SE115IMPCO,:new.SE115MD,:new.SE115MDA,:new.SE115MDACO,:new.SE115MOD,:new.SE115NDBEN,:new.SE115NDORI,:new.SE115NOMBE,:new.SE115NOMOR,:new.SE115OPER,:new.SE115OR,:new.SE115PABEN,:new.SE115PAORI,:new.SE115PAP,:new.SE115RE,:new.SE115REF,:new.SE115SBOP,:new.SE115SBOR,:new.SE115SU,:new.SE115SUC,:new.SE115TC,:new.SE115TDBEN,:new.SE115TDORI,:new.SE115TELBE,:new.SE115TIPO,:new.SE115TOPE,:new.SE115TR, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'I'); END T_AUD_FSE115_AUD_I;
/

