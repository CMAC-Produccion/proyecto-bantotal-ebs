CREATE OR REPLACE PROCEDURE AUD_C_SNG001_AUDIT AS cnt NUMBER; BEGIN SELECT COUNT(*) INTO cnt FROM BANTPROD.AUD_SNG001_AUDIT; IF( cnt > 0 ) THEN INSERT INTO BANTPROD.AUD004 (AUDMstTim, AUDMstId, AUDMstTbl, AUDMstKey, AUDMstTrn, AUDMstUsr, AUDMstWst, AUDMstPgm, AUDMstReq, AUDMstTyp, AUDMstCon, AUDMstApp, AUDMstSrv, AUDMstSes, AUDMstGrp, AUDMstLog, AUDMstCur, AUDMstSnt,AUDMstTic) SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001',CONCAT( CONCAT( '|SNG001INST=', RTRIM(COALESCE(AUD_old_SNG001INST,AUD_new_SNG001INST)) ),'|' ),AUD_SNG001_UBT,AUD_SNG001_UBU,AUD_SNG001_UBM,AUD_SNG001_UBP,AUD_SNG001_UBR,AUD_SNG001_UAs,AUD_SNG001_UBC,AUD_SNG001_UBA,AUD_SNG001_UBS, '', 'BANTOTAL', '', '', '',AUD_SNG001_UT FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001AGE',AUD_old_SNG001AGE,AUD_new_SNG001AGE FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001AGE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001ASE',AUD_old_SNG001ASE,AUD_new_SNG001ASE FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001ASE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001CMX',AUD_old_SNG001CMX,AUD_new_SNG001CMX FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001CMX'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001CTA',AUD_old_SNG001CTA,AUD_new_SNG001CTA FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001CTA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001EJEC',AUD_old_SNG001EJEC,AUD_new_SNG001EJEC FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001EJEC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001EMC',AUD_old_SNG001EMC,AUD_new_SNG001EMC FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001EMC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001EMP',AUD_old_SNG001EMP,AUD_new_SNG001EMP FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001EMP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001EVER',AUD_old_SNG001EVER,AUD_new_SNG001EVER FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001EVER'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001EVTC',AUD_old_SNG001EVTC,AUD_new_SNG001EVTC FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001EVTC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001FIN',TO_CHAR(AUD_old_SNG001FIN,'YYYY-MM-DD'),TO_CHAR(AUD_new_SNG001FIN,'YYYY-MM-DD') FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001FIN'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001INST',AUD_old_SNG001INST,AUD_new_SNG001INST FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELE
CT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001INST'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001NCIC',AUD_old_SNG001NCIC,AUD_new_SNG001NCIC FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001NCIC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001NDOC',AUD_old_SNG001NDOC,AUD_new_SNG001NDOC FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001NDOC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001NGRP',AUD_old_SNG001NGRP,AUD_new_SNG001NGRP FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001NGRP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001ORI',AUD_old_SNG001ORI,AUD_new_SNG001ORI FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001ORI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001PAIS',AUD_old_SNG001PAIS,AUD_new_SNG001PAIS FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001PAIS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001PRE',AUD_old_SNG001PRE,AUD_new_SNG001PRE FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001PRE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001PZOS',AUD_old_SNG001PZOS,AUD_new_SNG001PZOS FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001PZOS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001SEG',AUD_old_SNG001SEG,AUD_new_SNG001SEG FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001SEG'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001TDOC',AUD_old_SNG001TDOC,AUD_new_SNG001TDOC FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001TDOC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001TPCR',AUD_old_SNG001TPCR,AUD_new_SNG001TPCR FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001TPCR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001USC',AUD_old_SNG001USC,AUD_new_SNG001USC FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001USC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG001USI',AUD_old_SNG001USI,AUD_new_SNG001USI FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG001USI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG009COD',AUD_old_SNG009COD,AUD_new_SNG009COD FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG009COD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_
SNG001_UOn,AUD_SNG001_GuidKey,'SNG014COD',AUD_old_SNG014COD,AUD_new_SNG014COD FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG014COD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG015COD',AUD_old_SNG015COD,AUD_new_SNG015COD FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG015COD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG017ANA',AUD_old_SNG017ANA,AUD_new_SNG017ANA FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG017ANA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG017CEF',AUD_old_SNG017CEF,AUD_new_SNG017CEF FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG017CEF'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG017CLI',AUD_old_SNG017CLI,AUD_new_SNG017CLI FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG017CLI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG017CMO',AUD_old_SNG017CMO,AUD_new_SNG017CMO FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG017CMO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG017COD',AUD_old_SNG017COD,AUD_new_SNG017COD FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG017COD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG017MCR',AUD_old_SNG017MCR,AUD_new_SNG017MCR FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG017MCR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG017MTO',AUD_old_SNG017MTO,AUD_new_SNG017MTO FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG017MTO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01CUEXM',AUD_old_SNG01CUEXM,AUD_new_SNG01CUEXM FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01CUEXM'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01FDSMB',AUD_old_SNG01FDSMB,AUD_new_SNG01FDSMB FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01FDSMB'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01ICEXM',AUD_old_SNG01ICEXM,AUD_new_SNG01ICEXM FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01ICEXM'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01ICUOT',AUD_old_SNG01ICUOT,AUD_new_SNG01ICUOT FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01ICUOT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01IPMIO',AUD_old_SNG01IPMIO,AUD_new_SNG01IPMIO FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim
 = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01IPMIO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01ISUAV',AUD_old_SNG01ISUAV,AUD_new_SNG01ISUAV FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01ISUAV'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01MEVAF',AUD_old_SNG01MEVAF,AUD_new_SNG01MEVAF FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01MEVAF'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01MEVAI',AUD_old_SNG01MEVAI,AUD_new_SNG01MEVAI FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01MEVAI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01SCORF',AUD_old_SNG01SCORF,AUD_new_SNG01SCORF FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01SCORF'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01SCORI',AUD_old_SNG01SCORI,AUD_new_SNG01SCORI FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01SCORI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01SDOCF',AUD_old_SNG01SDOCF,AUD_new_SNG01SDOCF FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01SDOCF'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01STGAF',AUD_old_SNG01STGAF,AUD_new_SNG01STGAF FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01STGAF'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG01STGAI',AUD_old_SNG01STGAI,AUD_new_SNG01STGAI FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG01STGAI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_SNG001_UOn,AUD_SNG001_GuidKey,'SNG229CORR',AUD_old_SNG229CORR,AUD_new_SNG229CORR FROM BANTPROD.AUD_SNG001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey AND AUDMstFld = 'SNG229CORR'); DELETE FROM AUD_SNG001_AUDIT  WHERE  EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_SNG001_UOn AND AUDMstId = AUD_SNG001_GuidKey);  COMMIT ;END IF;END;
/

