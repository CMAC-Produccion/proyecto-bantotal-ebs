CREATE OR REPLACE PROCEDURE AUD_C_PRD001_AUDIT AS cnt NUMBER; BEGIN SELECT COUNT(*) INTO cnt FROM BANTPROD.AUD_PRD001_AUDIT; IF( cnt > 0 ) THEN INSERT INTO BANTPROD.AUD004 (AUDMstTim, AUDMstId, AUDMstTbl, AUDMstKey, AUDMstTrn, AUDMstUsr, AUDMstWst, AUDMstPgm, AUDMstReq, AUDMstTyp, AUDMstCon, AUDMstApp, AUDMstSrv, AUDMstSes, AUDMstGrp, AUDMstLog, AUDMstCur, AUDMstSnt,AUDMstTic) SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD001',CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( '|MODULO=', RTRIM(COALESCE(AUD_old_MODULO,AUD_new_MODULO)) ),CONCAT( '|MONEDA=', RTRIM(COALESCE(AUD_old_MONEDA,AUD_new_MONEDA)) ) ),CONCAT( '|PAPEL=', RTRIM(COALESCE(AUD_old_PAPEL,AUD_new_PAPEL)) ) ),CONCAT( '|PGCOD=', RTRIM(COALESCE(AUD_old_PGCOD,AUD_new_PGCOD)) ) ),CONCAT( '|TOTOPE=', RTRIM(COALESCE(AUD_old_TOTOPE,AUD_new_TOTOPE)) ) ),'|' ),AUD_PRD001_UBT,AUD_PRD001_UBU,AUD_PRD001_UBM,AUD_PRD001_UBP,AUD_PRD001_UBR,AUD_PRD001_UAs,AUD_PRD001_UBC,AUD_PRD001_UBA,AUD_PRD001_UBS, '', 'BANTOTAL', '', '', '',AUD_PRD001_UT FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'MODULO',AUD_old_MODULO,AUD_new_MODULO FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'MODULO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'MONEDA',AUD_old_MONEDA,AUD_new_MONEDA FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'MONEDA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PAPEL',AUD_old_PAPEL,AUD_new_PAPEL FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PAPEL'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PGCOD',AUD_old_PGCOD,AUD_new_PGCOD FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PGCOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1ADMCHQ',AUD_old_PRD1ADMCHQ,AUD_new_PRD1ADMCHQ FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1ADMCHQ'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1AOIMP',AUD_old_PRD1AOIMP,AUD_new_PRD1AOIMP FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1AOIMP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CAUT',AUD_old_PRD1CAUT,AUD_new_PRD1CAUT FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CAUT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CBGA',AUD_old_PRD1CBGA,AUD_new_PRD1CBGA FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CBGA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CCHQ',AUD_old_PRD1CCHQ,AUD_new_PRD1CCHQ FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CCHQ'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CESTC',AUD_old_PRD1CESTC,AUD_new_PRD1CESTC FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CEST
C'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CINT',AUD_old_PRD1CINT,AUD_new_PRD1CINT FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CINT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CINT1',AUD_old_PRD1CINT1,AUD_new_PRD1CINT1 FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CINT1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CINT2',AUD_old_PRD1CINT2,AUD_new_PRD1CINT2 FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CINT2'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CLTCOD',AUD_old_PRD1CLTCOD,AUD_new_PRD1CLTCOD FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CLTCOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CSMO',AUD_old_PRD1CSMO,AUD_new_PRD1CSMO FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CSMO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1CSPR',AUD_old_PRD1CSPR,AUD_new_PRD1CSPR FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1CSPR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1DREV',AUD_old_PRD1DREV,AUD_new_PRD1DREV FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1DREV'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1FCHALT',TO_CHAR(AUD_old_PRD1FCHALT,'YYYY-MM-DD'),TO_CHAR(AUD_new_PRD1FCHALT,'YYYY-MM-DD') FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1FCHALT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1FCHBAJ',TO_CHAR(AUD_old_PRD1FCHBAJ,'YYYY-MM-DD'),TO_CHAR(AUD_new_PRD1FCHBAJ,'YYYY-MM-DD') FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1FCHBAJ'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1FVIG',TO_CHAR(AUD_old_PRD1FVIG,'YYYY-MM-DD'),TO_CHAR(AUD_new_PRD1FVIG,'YYYY-MM-DD') FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1FVIG'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1LINCR',AUD_old_PRD1LINCR,AUD_new_PRD1LINCR FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1LINCR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1MODOP',AUD_old_PRD1MODOP,AUD_new_PRD1MODOP FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1MODOP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1MOVLA',AUD_old_PRD1MOVLA,AUD_new_PRD1MOVLA FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1MOVLA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_G
uidKey,'PRD1PERA1',AUD_old_PRD1PERA1,AUD_new_PRD1PERA1 FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1PERA1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1PERA2',AUD_old_PRD1PERA2,AUD_new_PRD1PERA2 FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1PERA2'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1PGMA',AUD_old_PRD1PGMA,AUD_new_PRD1PGMA FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1PGMA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1PINT',AUD_old_PRD1PINT,AUD_new_PRD1PINT FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1PINT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1PLUS',AUD_old_PRD1PLUS,AUD_new_PRD1PLUS FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1PLUS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1PMI',AUD_old_PRD1PMI,AUD_new_PRD1PMI FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1PMI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1PRCSOL',AUD_old_PRD1PRCSOL,AUD_new_PRD1PRCSOL FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1PRCSOL'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1PZO',AUD_old_PRD1PZO,AUD_new_PRD1PZO FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1PZO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1SDOI',AUD_old_PRD1SDOI,AUD_new_PRD1SDOI FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1SDOI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1STSPA',AUD_old_PRD1STSPA,AUD_new_PRD1STSPA FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1STSPA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TAJU',AUD_old_PRD1TAJU,AUD_new_PRD1TAJU FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TAJU'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TANO',AUD_old_PRD1TANO,AUD_new_PRD1TANO FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TANO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TASA',AUD_old_PRD1TASA,AUD_new_PRD1TASA FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TASA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TASAC',AUD_old_PRD1TASAC,AUD_new_PRD1TASAC FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TASAC'); 
INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TCALI',AUD_old_PRD1TCALI,AUD_new_PRD1TCALI FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TCALI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TCES',AUD_old_PRD1TCES,AUD_new_PRD1TCES FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TCES'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TDIA',AUD_old_PRD1TDIA,AUD_new_PRD1TDIA FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TDIA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TRNOP',AUD_old_PRD1TRNOP,AUD_new_PRD1TRNOP FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TRNOP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TRTCHQ',AUD_old_PRD1TRTCHQ,AUD_new_PRD1TRTCHQ FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TRTCHQ'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TRTCOM',AUD_old_PRD1TRTCOM,AUD_new_PRD1TRTCOM FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TRTCOM'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TRTTS1',AUD_old_PRD1TRTTS1,AUD_new_PRD1TRTTS1 FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TRTTS1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TRTTS2',AUD_old_PRD1TRTTS2,AUD_new_PRD1TRTTS2 FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TRTTS2'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TTASA',AUD_old_PRD1TTASA,AUD_new_PRD1TTASA FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TTASA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1TTASC',AUD_old_PRD1TTASC,AUD_new_PRD1TTASC FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1TTASC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1USER',AUD_old_PRD1USER,AUD_new_PRD1USER FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1USER'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1USRALT',AUD_old_PRD1USRALT,AUD_new_PRD1USRALT FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1USRALT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1USRBAJ',AUD_old_PRD1USRBAJ,AUD_new_PRD1USRBAJ FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1USRBAJ'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1VGTE',AUD_old_PRD1VGTE,AUD_new_PRD1VGTE FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BA
NTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1VGTE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1WRKBAJ',AUD_old_PRD1WRKBAJ,AUD_new_PRD1WRKBAJ FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1WRKBAJ'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'PRD1WSTALT',AUD_old_PRD1WSTALT,AUD_new_PRD1WSTALT FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'PRD1WSTALT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_PRD001_UOn,AUD_PRD001_GuidKey,'TOTOPE',AUD_old_TOTOPE,AUD_new_TOTOPE FROM BANTPROD.AUD_PRD001_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey AND AUDMstFld = 'TOTOPE'); DELETE FROM AUD_PRD001_AUDIT  WHERE  EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_PRD001_UOn AND AUDMstId = AUD_PRD001_GuidKey);  COMMIT ;END IF;END;
/

