CREATE OR REPLACE TRIGGER T_AUD_FPP108_AUD_I  AFTER INSERT ON FPP108  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_FPP108_AUDIT ( AUD_new_PP108AUX1,AUD_new_PP108AUX10,AUD_new_PP108AUX11,AUD_new_PP108AUX12,AUD_new_PP108AUX13,AUD_new_PP108AUX14,AUD_new_PP108AUX15,AUD_new_PP108AUX16,AUD_new_PP108AUX17,AUD_new_PP108AUX18,AUD_new_PP108AUX2,AUD_new_PP108AUX3,AUD_new_PP108AUX4,AUD_new_PP108AUX5,AUD_new_PP108AUX6,AUD_new_PP108AUX7,AUD_new_PP108AUX8,AUD_new_PP108AUX9,AUD_new_PP108CERR,AUD_new_PP108COD,AUD_new_PP108COR,AUD_new_PP108CTA,AUD_new_PP108FECD,AUD_new_PP108MDA,AUD_new_PP108MOD,AUD_new_PP108MTO,AUD_new_PP108NCART,AUD_new_PP108OPE,AUD_new_PP108PAP,AUD_new_PP108SBO,AUD_new_PP108SUC,AUD_new_PP108TCD,AUD_new_PP108TCO,AUD_new_PP108TFC,AUD_new_PP108TMO,AUD_new_PP108TNR,AUD_new_PP108TOP,AUD_new_PP108TOR,AUD_new_PP108TSB,AUD_new_PP108TSU,AUD_new_PP108TTR, AUD_FPP108_GuidKey ,AUD_FPP108_UOn,AUD_FPP108_UT ,AUD_FPP108_UBR ,AUD_FPP108_UBC ,AUD_FPP108_UBT ,AUD_FPP108_UBU ,AUD_FPP108_UBA ,AUD_FPP108_UBS ,AUD_FPP108_UBP ,AUD_FPP108_UBM ,AUD_FPP108_UAs  )      VALUES (:new.PP108AUX1,:new.PP108AUX10,:new.PP108AUX11,:new.PP108AUX12,:new.PP108AUX13,:new.PP108AUX14,:new.PP108AUX15,:new.PP108AUX16,:new.PP108AUX17,:new.PP108AUX18,:new.PP108AUX2,:new.PP108AUX3,:new.PP108AUX4,:new.PP108AUX5,:new.PP108AUX6,:new.PP108AUX7,:new.PP108AUX8,:new.PP108AUX9,:new.PP108CERR,:new.PP108COD,:new.PP108COR,:new.PP108CTA,:new.PP108FECD,:new.PP108MDA,:new.PP108MOD,:new.PP108MTO,:new.PP108NCART,:new.PP108OPE,:new.PP108PAP,:new.PP108SBO,:new.PP108SUC,:new.PP108TCD,:new.PP108TCO,:new.PP108TFC,:new.PP108TMO,:new.PP108TNR,:new.PP108TOP,:new.PP108TOR,:new.PP108TSB,:new.PP108TSU,:new.PP108TTR, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'I'); END T_AUD_FPP108_AUD_I;
/

