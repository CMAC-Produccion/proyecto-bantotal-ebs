CREATE OR REPLACE PROCEDURE AUD_C_FPP175_AUDIT AS cnt NUMBER; BEGIN SELECT COUNT(*) INTO cnt FROM BANTPROD.AUD_FPP175_AUDIT; IF( cnt > 0 ) THEN INSERT INTO BANTPROD.AUD004 (AUDMstTim, AUDMstId, AUDMstTbl, AUDMstKey, AUDMstTrn, AUDMstUsr, AUDMstWst, AUDMstPgm, AUDMstReq, AUDMstTyp, AUDMstCon, AUDMstApp, AUDMstSrv, AUDMstSes, AUDMstGrp, AUDMstLog, AUDMstCur, AUDMstSnt,AUDMstTic) SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'FPP175',CONCAT( CONCAT( CONCAT( CONCAT( '|PP173COD=', RTRIM(COALESCE(AUD_old_PP173COD,AUD_new_PP173COD)) ),CONCAT( '|PP174COD=', RTRIM(COALESCE(AUD_old_PP174COD,AUD_new_PP174COD)) ) ),CONCAT( '|PP175CORR=', RTRIM(COALESCE(AUD_old_PP175CORR,AUD_new_PP175CORR)) ) ),'|' ),AUD_FPP175_UBT,AUD_FPP175_UBU,AUD_FPP175_UBM,AUD_FPP175_UBP,AUD_FPP175_UBR,AUD_FPP175_UAs,AUD_FPP175_UBC,AUD_FPP175_UBA,AUD_FPP175_UBS, '', 'BANTOTAL', '', '', '',AUD_FPP175_UT FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP173COD',AUD_old_PP173COD,AUD_new_PP173COD FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP173COD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP174COD',AUD_old_PP174COD,AUD_new_PP174COD FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP174COD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU1',AUD_old_PP175AU1,AUD_new_PP175AU1 FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU10',AUD_old_PP175AU10,AUD_new_PP175AU10 FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU10'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU11',AUD_old_PP175AU11,AUD_new_PP175AU11 FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU11'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU12',AUD_old_PP175AU12,AUD_new_PP175AU12 FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU12'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU2',AUD_old_PP175AU2,AUD_new_PP175AU2 FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU2'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU3',AUD_old_PP175AU3,AUD_new_PP175AU3 FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU3'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU4',TO_CHAR(AUD_old_PP175AU4,'YYYY-MM-DD'),TO_CHAR(AUD_new_PP175AU4,'YYYY-MM-DD') FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU4'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU5',TO_CHAR(AUD_old_PP175AU5,'YYYY-MM-DD'),TO_CHAR(AUD_new_PP175AU5,'YYYY-MM-DD') FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU5'); IN
SERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU6',TO_CHAR(AUD_old_PP175AU6,'YYYY-MM-DD'),TO_CHAR(AUD_new_PP175AU6,'YYYY-MM-DD') FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU6'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU7',AUD_old_PP175AU7,AUD_new_PP175AU7 FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU7'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU8',AUD_old_PP175AU8,AUD_new_PP175AU8 FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU8'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175AU9',AUD_old_PP175AU9,AUD_new_PP175AU9 FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175AU9'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175CORR',AUD_old_PP175CORR,AUD_new_PP175CORR FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175CORR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175CTA',AUD_old_PP175CTA,AUD_new_PP175CTA FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175CTA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175MDA',AUD_old_PP175MDA,AUD_new_PP175MDA FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175MDA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175MOD',AUD_old_PP175MOD,AUD_new_PP175MOD FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175MOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175OPER',AUD_old_PP175OPER,AUD_new_PP175OPER FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175OPER'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175PAP',AUD_old_PP175PAP,AUD_new_PP175PAP FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175PAP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175PGCOD',AUD_old_PP175PGCOD,AUD_new_PP175PGCOD FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175PGCOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175SBOP',AUD_old_PP175SBOP,AUD_new_PP175SBOP FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175SBOP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175SUC',AUD_old_PP175SUC,AUD_new_PP175SUC FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175SUC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TCO',AUD_old_PP175TCO,AUD_new_PP175TCO FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANT
PROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TCO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TFCO',TO_CHAR(AUD_old_PP175TFCO,'YYYY-MM-DD'),TO_CHAR(AUD_new_PP175TFCO,'YYYY-MM-DD') FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TFCO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TMOD',AUD_old_PP175TMOD,AUD_new_PP175TMOD FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TMOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TNREL',AUD_old_PP175TNREL,AUD_new_PP175TNREL FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TNREL'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TOPE',AUD_old_PP175TOPE,AUD_new_PP175TOPE FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TOPE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TORD',AUD_old_PP175TORD,AUD_new_PP175TORD FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TORD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TPGC',AUD_old_PP175TPGC,AUD_new_PP175TPGC FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TPGC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TSBO',AUD_old_PP175TSBO,AUD_new_PP175TSBO FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TSBO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TSUC',AUD_old_PP175TSUC,AUD_new_PP175TSUC FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TSUC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FPP175_UOn,AUD_FPP175_GuidKey,'PP175TTRAN',AUD_old_PP175TTRAN,AUD_new_PP175TTRAN FROM BANTPROD.AUD_FPP175_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey AND AUDMstFld = 'PP175TTRAN'); DELETE FROM AUD_FPP175_AUDIT  WHERE  EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FPP175_UOn AND AUDMstId = AUD_FPP175_GuidKey);  COMMIT ;END IF;END;
/

