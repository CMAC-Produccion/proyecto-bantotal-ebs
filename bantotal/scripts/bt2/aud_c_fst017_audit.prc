CREATE OR REPLACE PROCEDURE AUD_C_FST017_AUDIT AS cnt NUMBER; BEGIN SELECT COUNT(*) INTO cnt FROM BANTPROD.AUD_FST017_AUDIT; IF( cnt > 0 ) THEN INSERT INTO BANTPROD.AUD004 (AUDMstTim, AUDMstId, AUDMstTbl, AUDMstKey, AUDMstTrn, AUDMstUsr, AUDMstWst, AUDMstPgm, AUDMstReq, AUDMstTyp, AUDMstCon, AUDMstApp, AUDMstSrv, AUDMstSes, AUDMstGrp, AUDMstLog, AUDMstCur, AUDMstSnt,AUDMstTic) SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'FST017',CONCAT( CONCAT( '|PGCOD=', RTRIM(COALESCE(AUD_old_PGCOD,AUD_new_PGCOD)) ),'|' ),AUD_FST017_UBT,AUD_FST017_UBU,AUD_FST017_UBM,AUD_FST017_UBP,AUD_FST017_UBR,AUD_FST017_UAs,AUD_FST017_UBC,AUD_FST017_UBA,AUD_FST017_UBS, '', 'BANTOTAL', '', '', '',AUD_FST017_UT FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGADFI',AUD_old_PGADFI,AUD_new_PGADFI FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGADFI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGAJMN',AUD_old_PGAJMN,AUD_new_PGAJMN FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGAJMN'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGALTP',AUD_old_PGALTP,AUD_new_PGALTP FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGALTP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGAPOD',AUD_old_PGAPOD,AUD_new_PGAPOD FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGAPOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGBBTT',AUD_old_PGBBTT,AUD_new_PGBBTT FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGBBTT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCAXO',AUD_old_PGCAXO,AUD_new_PGCAXO FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCAXO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCAXS',AUD_old_PGCAXS,AUD_new_PGCAXS FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCAXS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCCXO',AUD_old_PGCCXO,AUD_new_PGCCXO FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCCXO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCCXS',AUD_old_PGCCXS,AUD_new_PGCCXS FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCCXS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCEFL',AUD_old_PGCEFL,AUD_new_PGCEFL FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCEFL'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCLTE',AUD_old_PGCLTE,AUD_new_PGCLTE FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCLTE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCOD',AUD_ol
d_PGCOD,AUD_new_PGCOD FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCSN1',AUD_old_PGCSN1,AUD_new_PGCSN1 FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCSN1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCSN2',AUD_old_PGCSN2,AUD_new_PGCSN2 FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCSN2'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCSN3',AUD_old_PGCSN3,AUD_new_PGCSN3 FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCSN3'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCSN4',AUD_old_PGCSN4,AUD_new_PGCSN4 FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCSN4'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGCSN5',AUD_old_PGCSN5,AUD_new_PGCSN5 FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGCSN5'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGDUSA',AUD_old_PGDUSA,AUD_new_PGDUSA FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGDUSA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGDUSB',AUD_old_PGDUSB,AUD_new_PGDUSB FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGDUSB'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGFAPE',TO_CHAR(AUD_old_PGFAPE,'YYYY-MM-DD'),TO_CHAR(AUD_new_PGFAPE,'YYYY-MM-DD') FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGFAPE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGFBCE',TO_CHAR(AUD_old_PGFBCE,'YYYY-MM-DD'),TO_CHAR(AUD_new_PGFBCE,'YYYY-MM-DD') FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGFBCE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGFCIE',TO_CHAR(AUD_old_PGFCIE,'YYYY-MM-DD'),TO_CHAR(AUD_new_PGFCIE,'YYYY-MM-DD') FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGFCIE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGFMES',TO_CHAR(AUD_old_PGFMES,'YYYY-MM-DD'),TO_CHAR(AUD_new_PGFMES,'YYYY-MM-DD') FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGFMES'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGHIOL',AUD_old_PGHIOL,AUD_new_PGHIOL FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGHIOL'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGIDIO',AUD_old_PGIDIO,AUD_new_PGIDIO FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND 
AUDMstFld = 'PGIDIO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGIVM2',AUD_old_PGIVM2,AUD_new_PGIVM2 FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGIVM2'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGIVME',AUD_old_PGIVME,AUD_new_PGIVME FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGIVME'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGLIMM',AUD_old_PGLIMM,AUD_new_PGLIMM FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGLIMM'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGMDBC',AUD_old_PGMDBC,AUD_new_PGMDBC FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGMDBC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGMNAC',AUD_old_PGMNAC,AUD_new_PGMNAC FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGMNAC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGMOCA',AUD_old_PGMOCA,AUD_new_PGMOCA FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGMOCA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGMOCC',AUD_old_PGMOCC,AUD_new_PGMOCC FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGMOCC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGMODC',AUD_old_PGMODC,AUD_new_PGMODC FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGMODC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGNBCO',AUD_old_PGNBCO,AUD_new_PGNBCO FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGNBCO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGNIV',AUD_old_PGNIV,AUD_new_PGNIV FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGNIV'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGNOM',AUD_old_PGNOM,AUD_new_PGNOM FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGNOM'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGPAIS',AUD_old_PGPAIS,AUD_new_PGPAIS FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGPAIS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGPLAT',AUD_old_PGPLAT,AUD_new_PGPLAT FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGPLAT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGPOME',AUD_old_PGPOME,AUD_new_PGPOME FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGPOME'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,A
UD_FST017_GuidKey,'PGPOMN',AUD_old_PGPOMN,AUD_new_PGPOMN FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGPOMN'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGREFV',AUD_old_PGREFV,AUD_new_PGREFV FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGREFV'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGRUBR',AUD_old_PGRUBR,AUD_new_PGRUBR FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGRUBR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGSIGL',AUD_old_PGSIGL,AUD_new_PGSIGL FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGSIGL'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGSUC',AUD_old_PGSUC,AUD_new_PGSUC FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGSUC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGSUC0',AUD_old_PGSUC0,AUD_new_PGSUC0 FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGSUC0'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGVUTI',AUD_old_PGVUTI,AUD_new_PGVUTI FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGVUTI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGVUTM',AUD_old_PGVUTM,AUD_new_PGVUTM FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGVUTM'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'PGVUTV',AUD_old_PGVUTV,AUD_new_PGVUTV FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'PGVUTV'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FST017_UOn,AUD_FST017_GuidKey,'RPCCYG',AUD_old_RPCCYG,AUD_new_RPCCYG FROM BANTPROD.AUD_FST017_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey AND AUDMstFld = 'RPCCYG'); DELETE FROM AUD_FST017_AUDIT  WHERE  EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FST017_UOn AND AUDMstId = AUD_FST017_GuidKey);  COMMIT ;END IF;END;
/

