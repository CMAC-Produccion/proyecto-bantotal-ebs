CREATE OR REPLACE TRIGGER T_AUD_FSE115_AUD_D  AFTER DELETE ON FSE115  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_FSE115_AUDIT (AUD_old_SE115AX1,AUD_old_SE115AX2,AUD_old_SE115AX3,AUD_old_SE115AX4,AUD_old_SE115BCODS,AUD_old_SE115BCOOR,AUD_old_SE115BSUDS,AUD_old_SE115BSUOR,AUD_old_SE115CCIDS,AUD_old_SE115CCIOR,AUD_old_SE115CD,AUD_old_SE115CLASI,AUD_old_SE115CO,AUD_old_SE115COD,AUD_old_SE115CODT,AUD_old_SE115CRIT,AUD_old_SE115CTA,AUD_old_SE115DIRBE,AUD_old_SE115DIROR,AUD_old_SE115F1,AUD_old_SE115FC,AUD_old_SE115FVAL,AUD_old_SE115FVTO,AUD_old_SE115IMP,AUD_old_SE115IMPCO,AUD_old_SE115MD,AUD_old_SE115MDA,AUD_old_SE115MDACO,AUD_old_SE115MOD,AUD_old_SE115NDBEN,AUD_old_SE115NDORI,AUD_old_SE115NOMBE,AUD_old_SE115NOMOR,AUD_old_SE115OPER,AUD_old_SE115OR,AUD_old_SE115PABEN,AUD_old_SE115PAORI,AUD_old_SE115PAP,AUD_old_SE115RE,AUD_old_SE115REF,AUD_old_SE115SBOP,AUD_old_SE115SBOR,AUD_old_SE115SU,AUD_old_SE115SUC,AUD_old_SE115TC,AUD_old_SE115TDBEN,AUD_old_SE115TDORI,AUD_old_SE115TELBE,AUD_old_SE115TIPO,AUD_old_SE115TOPE,AUD_old_SE115TR, AUD_FSE115_GuidKey ,AUD_FSE115_UOn,AUD_FSE115_UT ,AUD_FSE115_UBR ,AUD_FSE115_UBC ,AUD_FSE115_UBT ,AUD_FSE115_UBU ,AUD_FSE115_UBA ,AUD_FSE115_UBS ,AUD_FSE115_UBP ,AUD_FSE115_UBM ,AUD_FSE115_UAs )      VALUES (:old.SE115AX1,:old.SE115AX2,:old.SE115AX3,:old.SE115AX4,:old.SE115BCODS,:old.SE115BCOOR,:old.SE115BSUDS,:old.SE115BSUOR,:old.SE115CCIDS,:old.SE115CCIOR,:old.SE115CD,:old.SE115CLASI,:old.SE115CO,:old.SE115COD,:old.SE115CODT,:old.SE115CRIT,:old.SE115CTA,:old.SE115DIRBE,:old.SE115DIROR,:old.SE115F1,:old.SE115FC,:old.SE115FVAL,:old.SE115FVTO,:old.SE115IMP,:old.SE115IMPCO,:old.SE115MD,:old.SE115MDA,:old.SE115MDACO,:old.SE115MOD,:old.SE115NDBEN,:old.SE115NDORI,:old.SE115NOMBE,:old.SE115NOMOR,:old.SE115OPER,:old.SE115OR,:old.SE115PABEN,:old.SE115PAORI,:old.SE115PAP,:old.SE115RE,:old.SE115REF,:old.SE115SBOP,:old.SE115SBOR,:old.SE115SU,:old.SE115SUC,:old.SE115TC,:old.SE115TDBEN,:old.SE115TDORI,:old.SE115TELBE,:old.SE115TIPO,:old.SE115TOPE,:old.SE115TR, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'D' ); END T_AUD_FSE115_AUD_D;
/

