CREATE OR REPLACE TRIGGER T_AUD_FST035_AUD_D  AFTER DELETE ON FST035  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_FST035_AUDIT (AUD_old_FACCOD,AUD_old_PGCOD,AUD_old_TRACHE,AUD_old_TRACTA,AUD_old_TRAFCH,AUD_old_TRAIMP,AUD_old_TRAMDA,AUD_old_TRAOP,AUD_old_TRAPAP,AUD_old_TRAPER,AUD_old_TRAPOS,AUD_old_TRAPRE,AUD_old_TRAPRE1,AUD_old_TRAREF,AUD_old_TRASNE,AUD_old_TRASOP,AUD_old_TRASTH,AUD_old_TRASUC,AUD_old_TRATAS,AUD_old_TRATC,AUD_old_TRATIM,AUD_old_TRATOP,AUD_old_TRAVAL,AUD_old_TRAVTO,AUD_old_TRCALC,AUD_old_TRCAPI,AUD_old_TRCATXT,AUD_old_TRCCOM,AUD_old_TRCCTA,AUD_old_TRCD13,AUD_old_TRCFIR,AUD_old_TRCINT,AUD_old_TRCIVA,AUD_old_TRCLTCOD,AUD_old_TRCMOV,AUD_old_TRCORD,AUD_old_TRDH,AUD_old_TREVIM,AUD_old_TREVOR,AUD_old_TREVPO,AUD_old_TRFCTA,AUD_old_TRFEIN,AUD_old_TRFMDA,AUD_old_TRFOP,AUD_old_TRFPAP,AUD_old_TRFPOS,AUD_old_TRFSOP,AUD_old_TRFSUC,AUD_old_TRFTOP,AUD_old_TRFTXI,AUD_old_TRFVAL,AUD_old_TRFVTO,AUD_old_TRLIST,AUD_old_TRLQIM,AUD_old_TRMOD,AUD_old_TRMORA,AUD_old_TRMRES,AUD_old_TRNOP,AUD_old_TRNREF,AUD_old_TRNRO,AUD_old_TROPCI,AUD_old_TRORD,AUD_old_TRPCHE,AUD_old_TRPCTA,AUD_old_TRPERD,AUD_old_TRPIMP,AUD_old_TRPLUS,AUD_old_TRPMDA,AUD_old_TRPOP,AUD_old_TRPPAP,AUD_old_TRPPIN,AUD_old_TRPPPR,AUD_old_TRPPRE,AUD_old_TRPPRE1,AUD_old_TRPPTO,AUD_old_TRPQCOD,AUD_old_TRPREF,AUD_old_TRPSOP,AUD_old_TRPSUC,AUD_old_TRPTOP,AUD_old_TRPTXT,AUD_old_TRPTXT1,AUD_old_TRPZME,AUD_old_TRPZMN,AUD_old_TRREGI,AUD_old_TRREL,AUD_old_TRREPI,AUD_old_TRREVT,AUD_old_TRSINO,AUD_old_TRSOBR,AUD_old_TRTAME,AUD_old_TRTAMN,AUD_old_TRTASA,AUD_old_TRTCAL,AUD_old_TRTCBI,AUD_old_TRTIMP,AUD_old_TRTINT,AUD_old_TRTIPR,AUD_old_TRTIPR1,AUD_old_TRTOP,AUD_old_TRTRCX,AUD_old_TRTRIF,AUD_old_TRTSOP,AUD_old_TRTTAS,AUD_old_TRTVTO,AUD_old_TRTXIM, AUD_FST035_GuidKey ,AUD_FST035_UOn,AUD_FST035_UT ,AUD_FST035_UBR ,AUD_FST035_UBC ,AUD_FST035_UBT ,AUD_FST035_UBU ,AUD_FST035_UBA ,AUD_FST035_UBS ,AUD_FST035_UBP ,AUD_FST035_UBM ,AUD_FST035_UAs )      VALUES (:old.FACCOD,:old.PGCOD,:old.TRACHE,:old.TRACTA,:old.TRAFCH,:old.TRAIMP,:old.TRAMDA,:old.TRAOP,:old.TRAPAP,:old.TRAPER,:old.TRAPOS,:old.TRAPRE,:old.TRAPRE1,:old.TRAREF,:old.TRASNE,:old.TRASOP,:old.TRASTH,:old.TRASUC,:old.TRATAS,:old.TRATC,:old.TRATIM,:old.TRATOP,:old.TRAVAL,:old.TRAVTO,:old.TRCALC,:old.TRCAPI,:old.TRCATXT,:old.TRCCOM,:old.TRCCTA,:old.TRCD13,:old.TRCFIR,:old.TRCINT,:old.TRCIVA,:old.TRCLTC
OD,:old.TRCMOV,:old.TRCORD,:old.TRDH,:old.TREVIM,:old.TREVOR,:old.TREVPO,:old.TRFCTA,:old.TRFEIN,:old.TRFMDA,:old.TRFOP,:old.TRFPAP,:old.TRFPOS,:old.TRFSOP,:old.TRFSUC,:old.TRFTOP,:old.TRFTXI,:old.TRFVAL,:old.TRFVTO,:old.TRLIST,:old.TRLQIM,:old.TRMOD,:old.TRMORA,:old.TRMRES,:old.TRNOP,:old.TRNREF,:old.TRNRO,:old.TROPCI,:old.TRORD,:old.TRPCHE,:old.TRPCTA,:old.TRPERD,:old.TRPIMP,:old.TRPLUS,:old.TRPMDA,:old.TRPOP,:old.TRPPAP,:old.TRPPIN,:old.TRPPPR,:old.TRPPRE,:old.TRPPRE1,:old.TRPPTO,:old.TRPQCOD,:old.TRPREF,:old.TRPSOP,:old.TRPSUC,:old.TRPTOP,:old.TRPTXT,:old.TRPTXT1,:old.TRPZME,:old.TRPZMN,:old.TRREGI,:old.TRREL,:old.TRREPI,:old.TRREVT,:old.TRSINO,:old.TRSOBR,:old.TRTAME,:old.TRTAMN,:old.TRTASA,:old.TRTCAL,:old.TRTCBI,:old.TRTIMP,:old.TRTINT,:old.TRTIPR,:old.TRTIPR1,:old.TRTOP,:old.TRTRCX,:old.TRTRIF,:old.TRTSOP,:old.TRTTAS,:old.TRTVTO,:old.TRTXIM, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'D' ); END T_AUD_FST035_AUD_D;
/

