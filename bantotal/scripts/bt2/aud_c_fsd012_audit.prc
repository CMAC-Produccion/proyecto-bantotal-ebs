CREATE OR REPLACE PROCEDURE AUD_C_FSD012_AUDIT AS cnt NUMBER; BEGIN SELECT COUNT(*) INTO cnt FROM BANTPROD.AUD_FSD012_AUDIT; IF( cnt > 0 ) THEN INSERT INTO BANTPROD.AUD004 (AUDMstTim, AUDMstId, AUDMstTbl, AUDMstKey, AUDMstTrn, AUDMstUsr, AUDMstWst, AUDMstPgm, AUDMstReq, AUDMstTyp, AUDMstCon, AUDMstApp, AUDMstSrv, AUDMstSes, AUDMstGrp, AUDMstLog, AUDMstCur, AUDMstSnt,AUDMstTic) SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'FSD012',CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( '|AOCTA=', RTRIM(COALESCE(AUD_old_AOCTA,AUD_new_AOCTA)) ),CONCAT( '|AOMDA=', RTRIM(COALESCE(AUD_old_AOMDA,AUD_new_AOMDA)) ) ),CONCAT( '|AOMOD=', RTRIM(COALESCE(AUD_old_AOMOD,AUD_new_AOMOD)) ) ),CONCAT( '|AOOPER=', RTRIM(COALESCE(AUD_old_AOOPER,AUD_new_AOOPER)) ) ),CONCAT( '|AOPAP=', RTRIM(COALESCE(AUD_old_AOPAP,AUD_new_AOPAP)) ) ),CONCAT( '|AOSBOP=', RTRIM(COALESCE(AUD_old_AOSBOP,AUD_new_AOSBOP)) ) ),CONCAT( '|AOSUC=', RTRIM(COALESCE(AUD_old_AOSUC,AUD_new_AOSUC)) ) ),CONCAT( '|AOTOPE=', RTRIM(COALESCE(AUD_old_AOTOPE,AUD_new_AOTOPE)) ) ),CONCAT( '|EVCORR=', RTRIM(COALESCE(AUD_old_EVCORR,AUD_new_EVCORR)) ) ),CONCAT( '|PGCOD=', RTRIM(COALESCE(AUD_old_PGCOD,AUD_new_PGCOD)) ) ),'|' ),AUD_FSD012_UBT,AUD_FSD012_UBU,AUD_FSD012_UBM,AUD_FSD012_UBP,AUD_FSD012_UBR,AUD_FSD012_UAs,AUD_FSD012_UBC,AUD_FSD012_UBA,AUD_FSD012_UBS, '', 'BANTOTAL', '', '', '',AUD_FSD012_UT FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'AOCTA',AUD_old_AOCTA,AUD_new_AOCTA FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'AOCTA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'AOMDA',AUD_old_AOMDA,AUD_new_AOMDA FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'AOMDA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'AOMOD',AUD_old_AOMOD,AUD_new_AOMOD FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'AOMOD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'AOOPER',AUD_old_AOOPER,AUD_new_AOOPER FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'AOOPER'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'AOPAP',AUD_old_AOPAP,AUD_new_AOPAP FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'AOPAP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'AOSBOP',AUD_old_AOSBOP,AUD_new_AOSBOP FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'AOSBOP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'AOSUC',AUD_old_AOSUC,AUD_new_AOSUC FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'AOSUC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'AOTOPE',AUD_old_AOTOPE,AUD_new_AOTOPE FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'AOTOPE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'D012CD',AUD_old_D012CD,AUD_new_D012CD FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_Guid
Key AND AUDMstFld = 'D012CD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'D012CO',AUD_old_D012CO,AUD_new_D012CO FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'D012CO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'D012FC',TO_CHAR(AUD_old_D012FC,'YYYY-MM-DD'),TO_CHAR(AUD_new_D012FC,'YYYY-MM-DD') FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'D012FC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'D012MO',AUD_old_D012MO,AUD_new_D012MO FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'D012MO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'D012OR',AUD_old_D012OR,AUD_new_D012OR FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'D012OR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'D012RE',AUD_old_D012RE,AUD_new_D012RE FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'D012RE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'D012SB',AUD_old_D012SB,AUD_new_D012SB FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'D012SB'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'D012SU',AUD_old_D012SU,AUD_new_D012SU FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'D012SU'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'D012TR',AUD_old_D012TR,AUD_new_D012TR FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'D012TR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVARB',AUD_old_EVARB,AUD_new_EVARB FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVARB'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVARB1',AUD_old_EVARB1,AUD_new_EVARB1 FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVARB1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVCAP',AUD_old_EVCAP,AUD_new_EVCAP FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVCAP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVCD01',AUD_old_EVCD01,AUD_new_EVCD01 FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVCD01'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVCD02',AUD_old_EVCD02,AUD_new_EVCD02 FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVCD02'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVCORR',AUD_old_EVCORR,AUD_new_EVCORR FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVCORR');
 INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVFVAL',TO_CHAR(AUD_old_EVFVAL,'YYYY-MM-DD'),TO_CHAR(AUD_new_EVFVAL,'YYYY-MM-DD') FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVFVAL'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVFVTO',TO_CHAR(AUD_old_EVFVTO,'YYYY-MM-DD'),TO_CHAR(AUD_new_EVFVTO,'YYYY-MM-DD') FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVFVTO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVIMP',AUD_old_EVIMP,AUD_new_EVIMP FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVIMP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVINT',AUD_old_EVINT,AUD_new_EVINT FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVINT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVINTC',AUD_old_EVINTC,AUD_new_EVINTC FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVINTC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVINV',AUD_old_EVINV,AUD_new_EVINV FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVINV'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVMD',AUD_old_EVMD,AUD_new_EVMD FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVMD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVMD1',AUD_old_EVMD1,AUD_new_EVMD1 FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVMD1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVMOR',AUD_old_EVMOR,AUD_new_EVMOR FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVMOR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVMORC',AUD_old_EVMORC,AUD_new_EVMORC FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVMORC'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVPER',AUD_old_EVPER,AUD_new_EVPER FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVPER'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVPRE',AUD_old_EVPRE,AUD_new_EVPRE FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVPRE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVPRE1',AUD_old_EVPRE1,AUD_new_EVPRE1 FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVPRE1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVSCAP',AUD_old_EVSCAP,AUD_new_EVSCAP FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVSCAP'); INSERT INTO B
ANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVSINT',AUD_old_EVSINT,AUD_new_EVSINT FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVSINT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVSMOR',AUD_old_EVSMOR,AUD_new_EVSMOR FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVSMOR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVTASA',AUD_old_EVTASA,AUD_new_EVTASA FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVTASA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVTCBI',AUD_old_EVTCBI,AUD_new_EVTCBI FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVTCBI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVTCBI1',AUD_old_EVTCBI1,AUD_new_EVTCBI1 FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVTCBI1'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVTIPO',AUD_old_EVTIPO,AUD_new_EVTIPO FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVTIPO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'EVTTAS',AUD_old_EVTTAS,AUD_new_EVTTAS FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'EVTTAS'); INSERT INTO BANTPROD.AUD005 SELECT AUD_FSD012_UOn,AUD_FSD012_GuidKey,'PGCOD',AUD_old_PGCOD,AUD_new_PGCOD FROM BANTPROD.AUD_FSD012_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey AND AUDMstFld = 'PGCOD'); DELETE FROM AUD_FSD012_AUDIT  WHERE  EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_FSD012_UOn AND AUDMstId = AUD_FSD012_GuidKey);  COMMIT ;END IF;END;
/

