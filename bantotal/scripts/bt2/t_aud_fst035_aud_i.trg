CREATE OR REPLACE TRIGGER T_AUD_FST035_AUD_I  AFTER INSERT ON FST035  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_FST035_AUDIT ( AUD_new_FACCOD,AUD_new_PGCOD,AUD_new_TRACHE,AUD_new_TRACTA,AUD_new_TRAFCH,AUD_new_TRAIMP,AUD_new_TRAMDA,AUD_new_TRAOP,AUD_new_TRAPAP,AUD_new_TRAPER,AUD_new_TRAPOS,AUD_new_TRAPRE,AUD_new_TRAPRE1,AUD_new_TRAREF,AUD_new_TRASNE,AUD_new_TRASOP,AUD_new_TRASTH,AUD_new_TRASUC,AUD_new_TRATAS,AUD_new_TRATC,AUD_new_TRATIM,AUD_new_TRATOP,AUD_new_TRAVAL,AUD_new_TRAVTO,AUD_new_TRCALC,AUD_new_TRCAPI,AUD_new_TRCATXT,AUD_new_TRCCOM,AUD_new_TRCCTA,AUD_new_TRCD13,AUD_new_TRCFIR,AUD_new_TRCINT,AUD_new_TRCIVA,AUD_new_TRCLTCOD,AUD_new_TRCMOV,AUD_new_TRCORD,AUD_new_TRDH,AUD_new_TREVIM,AUD_new_TREVOR,AUD_new_TREVPO,AUD_new_TRFCTA,AUD_new_TRFEIN,AUD_new_TRFMDA,AUD_new_TRFOP,AUD_new_TRFPAP,AUD_new_TRFPOS,AUD_new_TRFSOP,AUD_new_TRFSUC,AUD_new_TRFTOP,AUD_new_TRFTXI,AUD_new_TRFVAL,AUD_new_TRFVTO,AUD_new_TRLIST,AUD_new_TRLQIM,AUD_new_TRMOD,AUD_new_TRMORA,AUD_new_TRMRES,AUD_new_TRNOP,AUD_new_TRNREF,AUD_new_TRNRO,AUD_new_TROPCI,AUD_new_TRORD,AUD_new_TRPCHE,AUD_new_TRPCTA,AUD_new_TRPERD,AUD_new_TRPIMP,AUD_new_TRPLUS,AUD_new_TRPMDA,AUD_new_TRPOP,AUD_new_TRPPAP,AUD_new_TRPPIN,AUD_new_TRPPPR,AUD_new_TRPPRE,AUD_new_TRPPRE1,AUD_new_TRPPTO,AUD_new_TRPQCOD,AUD_new_TRPREF,AUD_new_TRPSOP,AUD_new_TRPSUC,AUD_new_TRPTOP,AUD_new_TRPTXT,AUD_new_TRPTXT1,AUD_new_TRPZME,AUD_new_TRPZMN,AUD_new_TRREGI,AUD_new_TRREL,AUD_new_TRREPI,AUD_new_TRREVT,AUD_new_TRSINO,AUD_new_TRSOBR,AUD_new_TRTAME,AUD_new_TRTAMN,AUD_new_TRTASA,AUD_new_TRTCAL,AUD_new_TRTCBI,AUD_new_TRTIMP,AUD_new_TRTINT,AUD_new_TRTIPR,AUD_new_TRTIPR1,AUD_new_TRTOP,AUD_new_TRTRCX,AUD_new_TRTRIF,AUD_new_TRTSOP,AUD_new_TRTTAS,AUD_new_TRTVTO,AUD_new_TRTXIM, AUD_FST035_GuidKey ,AUD_FST035_UOn,AUD_FST035_UT ,AUD_FST035_UBR ,AUD_FST035_UBC ,AUD_FST035_UBT ,AUD_FST035_UBU ,AUD_FST035_UBA ,AUD_FST035_UBS ,AUD_FST035_UBP ,AUD_FST035_UBM ,AUD_FST035_UAs  )      VALUES (:new.FACCOD,:new.PGCOD,:new.TRACHE,:new.TRACTA,:new.TRAFCH,:new.TRAIMP,:new.TRAMDA,:new.TRAOP,:new.TRAPAP,:new.TRAPER,:new.TRAPOS,:new.TRAPRE,:new.TRAPRE1,:new.TRAREF,:new.TRASNE,:new.TRASOP,:new.TRASTH,:new.TRASUC,:new.TRATAS,:new.TRATC,:new.TRATIM,:new.TRATOP,:new.TRAVAL,:new.TRAVTO,:new.TRCALC,:new.TRCAPI,:new.TRCATXT,:new.TRCCOM,:new.TRCCTA,:new.TRCD13,:new.TRCFIR,:new.TRCINT,:new.TRCIVA,:new.TRCL
TCOD,:new.TRCMOV,:new.TRCORD,:new.TRDH,:new.TREVIM,:new.TREVOR,:new.TREVPO,:new.TRFCTA,:new.TRFEIN,:new.TRFMDA,:new.TRFOP,:new.TRFPAP,:new.TRFPOS,:new.TRFSOP,:new.TRFSUC,:new.TRFTOP,:new.TRFTXI,:new.TRFVAL,:new.TRFVTO,:new.TRLIST,:new.TRLQIM,:new.TRMOD,:new.TRMORA,:new.TRMRES,:new.TRNOP,:new.TRNREF,:new.TRNRO,:new.TROPCI,:new.TRORD,:new.TRPCHE,:new.TRPCTA,:new.TRPERD,:new.TRPIMP,:new.TRPLUS,:new.TRPMDA,:new.TRPOP,:new.TRPPAP,:new.TRPPIN,:new.TRPPPR,:new.TRPPRE,:new.TRPPRE1,:new.TRPPTO,:new.TRPQCOD,:new.TRPREF,:new.TRPSOP,:new.TRPSUC,:new.TRPTOP,:new.TRPTXT,:new.TRPTXT1,:new.TRPZME,:new.TRPZMN,:new.TRREGI,:new.TRREL,:new.TRREPI,:new.TRREVT,:new.TRSINO,:new.TRSOBR,:new.TRTAME,:new.TRTAMN,:new.TRTASA,:new.TRTCAL,:new.TRTCBI,:new.TRTIMP,:new.TRTINT,:new.TRTIPR,:new.TRTIPR1,:new.TRTOP,:new.TRTRCX,:new.TRTRIF,:new.TRTSOP,:new.TRTTAS,:new.TRTVTO,:new.TRTXIM, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'I'); END T_AUD_FST035_AUD_I;
/

