CREATE OR REPLACE PROCEDURE AUD_C_JAQL088_AUDIT AS cnt NUMBER; BEGIN SELECT COUNT(*) INTO cnt FROM BANTPROD.AUD_JAQL088_AUDIT; IF( cnt > 0 ) THEN INSERT INTO BANTPROD.AUD004 (AUDMstTim, AUDMstId, AUDMstTbl, AUDMstKey, AUDMstTrn, AUDMstUsr, AUDMstWst, AUDMstPgm, AUDMstReq, AUDMstTyp, AUDMstCon, AUDMstApp, AUDMstSrv, AUDMstSes, AUDMstGrp, AUDMstLog, AUDMstCur, AUDMstSnt,AUDMstTic) SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL088',CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( CONCAT( '|JAQL88COIN=', RTRIM(COALESCE(AUD_old_JAQL88COIN,AUD_new_JAQL88COIN)) ),CONCAT( '|JAQL88COPA=', RTRIM(COALESCE(AUD_old_JAQL88COPA,AUD_new_JAQL88COPA)) ) ),CONCAT( '|JAQL88PGCO=', RTRIM(COALESCE(AUD_old_JAQL88PGCO,AUD_new_JAQL88PGCO)) ) ),CONCAT( '|JAQL88SCCT=', RTRIM(COALESCE(AUD_old_JAQL88SCCT,AUD_new_JAQL88SCCT)) ) ),CONCAT( '|JAQL88SCMD=', RTRIM(COALESCE(AUD_old_JAQL88SCMD,AUD_new_JAQL88SCMD)) ) ),CONCAT( '|JAQL88SCMO=', RTRIM(COALESCE(AUD_old_JAQL88SCMO,AUD_new_JAQL88SCMO)) ) ),CONCAT( '|JAQL88SCOP=', RTRIM(COALESCE(AUD_old_JAQL88SCOP,AUD_new_JAQL88SCOP)) ) ),CONCAT( '|JAQL88SCPA=', RTRIM(COALESCE(AUD_old_JAQL88SCPA,AUD_new_JAQL88SCPA)) ) ),CONCAT( '|JAQL88SCSB=', RTRIM(COALESCE(AUD_old_JAQL88SCSB,AUD_new_JAQL88SCSB)) ) ),CONCAT( '|JAQL88SCSU=', RTRIM(COALESCE(AUD_old_JAQL88SCSU,AUD_new_JAQL88SCSU)) ) ),CONCAT( '|JAQL88SCTO=', RTRIM(COALESCE(AUD_old_JAQL88SCTO,AUD_new_JAQL88SCTO)) ) ),'|' ),AUD_JAQL088_UBT,AUD_JAQL088_UBU,AUD_JAQL088_UBM,AUD_JAQL088_UBP,AUD_JAQL088_UBR,AUD_JAQL088_UAs,AUD_JAQL088_UBC,AUD_JAQL088_UBA,AUD_JAQL088_UBS, '', 'BANTOTAL', '', '', '',AUD_JAQL088_UT FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU01',AUD_old_JAQL88AU01,AUD_new_JAQL88AU01 FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU01'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU02',AUD_old_JAQL88AU02,AUD_new_JAQL88AU02 FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU02'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU03',AUD_old_JAQL88AU03,AUD_new_JAQL88AU03 FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU03'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU04',AUD_old_JAQL88AU04,AUD_new_JAQL88AU04 FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU04'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU05',AUD_old_JAQL88AU05,AUD_new_JAQL88AU05 FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU05'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU06',AUD_old_JAQL88AU06,AUD_new_JAQL88AU06 FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU06'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU07',AUD_old_JAQL88AU07,AUD_new_JAQL88AU07 FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU07'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU08',AUD_old_JAQL88AU08,AUD_new_JAQL88
AU08 FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU08'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU09',AUD_old_JAQL88AU09,AUD_new_JAQL88AU09 FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU09'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU10',TO_CHAR(AUD_old_JAQL88AU10,'YYYY-MM-DD'),TO_CHAR(AUD_new_JAQL88AU10,'YYYY-MM-DD') FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU10'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU11',TO_CHAR(AUD_old_JAQL88AU11,'YYYY-MM-DD'),TO_CHAR(AUD_new_JAQL88AU11,'YYYY-MM-DD') FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU11'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88AU12',TO_CHAR(AUD_old_JAQL88AU12,'YYYY-MM-DD'),TO_CHAR(AUD_new_JAQL88AU12,'YYYY-MM-DD') FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88AU12'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88COIN',AUD_old_JAQL88COIN,AUD_new_JAQL88COIN FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88COIN'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88COPA',AUD_old_JAQL88COPA,AUD_new_JAQL88COPA FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88COPA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88DEPR',AUD_old_JAQL88DEPR,AUD_new_JAQL88DEPR FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88DEPR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88DFIN',AUD_old_JAQL88DFIN,AUD_new_JAQL88DFIN FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88DFIN'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88DINI',AUD_old_JAQL88DINI,AUD_new_JAQL88DINI FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88DINI'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88ESPR',AUD_old_JAQL88ESPR,AUD_new_JAQL88ESPR FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88ESPR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88ESRE',AUD_old_JAQL88ESRE,AUD_new_JAQL88ESRE FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88ESRE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88FEAF',TO_CHAR(AUD_old_JAQL88FEAF,'YYYY-MM-DD'),TO_CHAR(AUD_new_JAQL88FEAF,'YYYY-MM-DD') FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88FEAF'); INSERT INTO BAN
TPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88FEDE',TO_CHAR(AUD_old_JAQL88FEDE,'YYYY-MM-DD'),TO_CHAR(AUD_new_JAQL88FEDE,'YYYY-MM-DD') FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88FEDE'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88FEPR',TO_CHAR(AUD_old_JAQL88FEPR,'YYYY-MM-DD'),TO_CHAR(AUD_new_JAQL88FEPR,'YYYY-MM-DD') FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88FEPR'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88MMAX',AUD_old_JAQL88MMAX,AUD_new_JAQL88MMAX FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88MMAX'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88PGCO',AUD_old_JAQL88PGCO,AUD_new_JAQL88PGCO FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88PGCO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88SCCT',AUD_old_JAQL88SCCT,AUD_new_JAQL88SCCT FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88SCCT'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88SCMD',AUD_old_JAQL88SCMD,AUD_new_JAQL88SCMD FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88SCMD'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88SCMO',AUD_old_JAQL88SCMO,AUD_new_JAQL88SCMO FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88SCMO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88SCOP',AUD_old_JAQL88SCOP,AUD_new_JAQL88SCOP FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88SCOP'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88SCPA',AUD_old_JAQL88SCPA,AUD_new_JAQL88SCPA FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88SCPA'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88SCSB',AUD_old_JAQL88SCSB,AUD_new_JAQL88SCSB FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88SCSB'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88SCSU',AUD_old_JAQL88SCSU,AUD_new_JAQL88SCSU FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88SCSU'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88SCTO',AUD_old_JAQL88SCTO,AUD_new_JAQL88SCTO FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88SCTO'); INSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88USAF',AUD_old_JAQL88USAF,AUD_new_JAQL88USAF FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88USAF'); I
NSERT INTO BANTPROD.AUD005 SELECT AUD_JAQL088_UOn,AUD_JAQL088_GuidKey,'JAQL88USDE',AUD_old_JAQL88USDE,AUD_new_JAQL88USDE FROM BANTPROD.AUD_JAQL088_AUDIT WHERE NOT EXISTS (SELECT * FROM BANTPROD.AUD005 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey AND AUDMstFld = 'JAQL88USDE'); DELETE FROM AUD_JAQL088_AUDIT  WHERE  EXISTS (SELECT * FROM BANTPROD.AUD004 WHERE AUDMstTim = AUD_JAQL088_UOn AND AUDMstId = AUD_JAQL088_GuidKey);  COMMIT ;END IF;END;
/

