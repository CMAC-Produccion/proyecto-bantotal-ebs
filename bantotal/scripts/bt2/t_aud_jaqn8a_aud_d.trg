CREATE OR REPLACE TRIGGER T_AUD_JAQN8A_AUD_D  AFTER DELETE ON JAQN8A  FOR EACH ROW    DECLARE	     RequestNumber VARCHAR2(50);      UserName VARCHAR2(50); 	  WrkstName VARCHAR2(50); 	  Server VARCHAR2(50); 	  Application VARCHAR2(50); 	  ProgramName VARCHAR2(50); 	  TransactionNumber VARCHAR2(50); 	  ConnectionId VARCHAR2(50);      ExistConData NUMBER;    BEGIN      SELECT sys_context('USERENV', 'SID') INTO ConnectionId FROM dual;      SELECT COUNT(*) INTO ExistConData FROM DBA_OBJECTS WHERE OWNER=sys_context( 'userenv', 'current_schema' ) AND OBJECT_TYPE = 'TABLE' AND OBJECT_NAME = 'CONDATA';      IF ExistConData > 0 THEN 		 SELECT MAX(Value) INTO RequestNumber FROM CONDATA WHERE Data ='REQUESTID'; 		 SELECT MAX(Value) INTO UserName FROM CONDATA WHERE Data ='USERID'; 		 SELECT MAX(Value) INTO WrkstName FROM CONDATA WHERE Data ='WRKST'; 		 SELECT MAX(Value) INTO Server FROM CONDATA WHERE Data ='SERVER'; 		 SELECT MAX(Value) INTO Application FROM CONDATA WHERE Data ='APPLICATION'; 		 SELECT MAX(Value) INTO ProgramName FROM CONDATA WHERE Data ='PROGRAM';      END IF;     RequestNumber := COALESCE(RequestNumber,'-1');     TransactionNumber := COALESCE(TransactionNumber,'-1');     ConnectionId := COALESCE(ConnectionId,'-1');     SELECT COALESCE(UserName,sys_context('USERENV', 'SESSION_USER'),'NOTDEFINED') INTO UserName FROM dual;     SELECT COALESCE(WrkstName,sys_context('USERENV', 'HOST'),'NOTDEFINED') INTO WrkstName FROM dual;     SELECT COALESCE(Server,sys_context('USERENV', 'SERVER_HOST'),'NOTDEFINED') INTO Server FROM dual;     SELECT COALESCE(Application,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO Application FROM dual;     SELECT COALESCE(ProgramName,sys_context('USERENV', 'ACTION'),'NOTDEFINED') INTO ProgramName FROM dual;      INSERT INTO BANTPROD.AUD_JAQN8A_AUDIT (AUD_old_JAQN8AAF1,AUD_old_JAQN8AAF2,AUD_old_JAQN8AAI1,AUD_old_JAQN8AAI2,AUD_old_JAQN8AAMC,AUD_old_JAQN8AAN1,AUD_old_JAQN8AAN2,AUD_old_JAQN8AAT1,AUD_old_JAQN8AAT2,AUD_old_JAQN8AAUT,AUD_old_JAQN8ACAA,AUD_old_JAQN8ACAP,AUD_old_JAQN8ACCD,AUD_old_JAQN8ACCO,AUD_old_JAQN8ACER,AUD_old_JAQN8ACES,AUD_old_JAQN8ACFE,AUD_old_JAQN8ACMD,AUD_old_JAQN8ACOD,AUD_old_JAQN8ACOR,AUD_old_JAQN8ACRE,AUD_old_JAQN8ACSB,AUD_old_JAQN8ACSU,AUD_old_JAQN8ACTA,AUD_old_JAQN8ACTR,AUD_old_JAQN8ADAC,AUD_old_JAQN8ADER,AUD_old_JAQN8AEMP,AUD_old_JAQN8AEST,AUD_old_JAQN8AFEC,AUD_old_JAQN8AFEP,AUD_old_JAQN8AFIE,AUD_old_JAQN8AFUM,AUD_old_JAQN8AHUM,AUD_old_JAQN8AICA,AUD_old_JAQN8AICV,AUD_old_JAQN8AINA,AUD_old_JAQN8AINS,AUD_old_JAQN8AINT,AUD_old_JAQN8AMCA,AUD_old_JAQN8AMDA,AUD_old_JAQN8AMOA,AUD_old_JAQN8AMOD,AUD_old_JAQN8AMOR,AUD_old_JAQN8ANAU,AUD_old_JAQN8ANCU,AUD_old_JAQN8AOPE,AUD_old_JAQN8APAM,AUD_old_JAQN8APAP,AUD_old_JAQN8APCA,AUD_old_JAQN8APEA,AUD_old_JAQN8APEN,AUD_old_JAQN8APIA,AUD_old_JAQN8APIN,AUD_old_JAQN8APMA,AUD_old_JAQN8APMC,AUD_old_JAQN8APPA,AUD_old_JAQN8ASBO,AUD_old_JAQN8ASEG,AUD_old_JAQN8ASIT,AUD_old_JAQN8ASUC,AUD_old_JAQN8ATEX,AUD_old_JAQN8ATGA,AUD_old_JAQN8ATIP,AUD_old_JAQN8ATOP,AUD_old_JAQN8ATRP,AUD_old_JAQN8AUSC,AUD_old_JAQN8AUSP,AUD_old_JAQN8AWKA,AUD_old_JAQN8AWKP, AUD_JAQN8A_GuidKey ,AUD_JAQN8A_UOn,AUD_JAQN8A_UT ,AUD_JAQN8A_UBR ,AUD_JAQN8A_UBC ,AUD_JAQN8A_UBT ,AUD_JAQN8A_UBU ,AUD_JAQN8A_UBA ,AUD_JAQN8A_UBS ,AUD_JAQN8A_UBP ,AUD_JAQN8A_UBM ,AUD_JAQN8A_UAs )      VALUES (:old.JAQN8AAF1,:old.JAQN8AAF2,:old.JAQN8AAI1,:old.JAQN8AAI2,:old.JAQN8AAMC,:old.JAQN8AAN1,:old.JAQN8AAN2,:old.JAQN8AAT1,:old.JAQN8AAT2,:old.JAQN8AAUT,:old.JAQN8ACAA,:old.JAQN8ACAP,:old.JAQN8ACCD,:old.JAQN8ACCO,:old.JAQN8ACER,:old.JAQN8ACES,:old.JAQN8ACFE,:old.JAQN8ACMD,:old.JAQN8ACOD,:old.JAQN8ACOR,:old.JAQN8ACRE,:old.JAQN8ACSB,:old.JAQN8ACSU,:old.JAQN8ACTA,:old.JAQN8ACTR,:old.JAQN8ADAC,:old.JAQN8ADER,:old.JAQN8AEMP,:old.JAQN8AEST,:old.JAQN8AFEC,:old.JAQN8AFEP,:old.JAQN8AFIE,:old.JAQN8AFUM,:old.JAQN8AHUM,:old.JAQN8AICA,:old.JAQN8AICV,:old.JAQN8AINA,:old.JAQN8AINS,:old.JAQN8AINT,:old.JAQN8AMCA,:old.JAQN8AMDA,:old.JAQN8AMOA,:old.JAQN8AMOD,:old.JAQN8AMOR,:old.JAQN8ANAU,:old.JAQN8ANCU,:old.JAQN8AOPE,:old.JAQN8APAM,:old.JAQN8A
PAP,:old.JAQN8APCA,:old.JAQN8APEA,:old.JAQN8APEN,:old.JAQN8APIA,:old.JAQN8APIN,:old.JAQN8APMA,:old.JAQN8APMC,:old.JAQN8APPA,:old.JAQN8ASBO,:old.JAQN8ASEG,:old.JAQN8ASIT,:old.JAQN8ASUC,:old.JAQN8ATEX,:old.JAQN8ATGA,:old.JAQN8ATIP,:old.JAQN8ATOP,:old.JAQN8ATRP,:old.JAQN8AUSC,:old.JAQN8AUSP,:old.JAQN8AWKA,:old.JAQN8AWKP, SYS_GUID(),SYSTIMESTAMP,SYSTIMESTAMP,RequestNumber,ConnectionId,TransactionNumber,UserName,Application,Server,ProgramName,WrkstName,'D' ); END T_AUD_JAQN8A_AUD_D;
/

